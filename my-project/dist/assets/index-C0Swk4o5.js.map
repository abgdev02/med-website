{"version":3,"mappings":";wkCAKgB,SAAAA,EAAW,GAAqB,CAC9C,KAAM,CAACC,EAAeC,CAAgB,EAAIC,WAAS,MAAM,EAEzDC,YAAU,IAAM,CACd,MAAMC,EAAe,IAAM,CACzB,MAAMC,EAAW,CAAC,OAAQ,QAAS,cAAc,EAC3CC,EAAiB,OAAO,QAAU,IAExC,UAAWC,KAAWF,EAAU,CACxB,MAAAG,EAAU,SAAS,eAAeD,CAAO,EAC/C,GAAIC,EAAS,CACL,MAAE,UAAAC,EAAW,aAAAC,CAAA,EAAiBF,EACpC,GAAIF,GAAkBG,GAAaH,EAAiBG,EAAYC,EAAc,CAC5ET,EAAiBM,CAAO,EACxB,MACF,CACF,CAEJ,EAGI,cAAO,QAAU,KACnBN,EAAiB,MAAM,EAGlB,wBAAiB,SAAUG,CAAY,EACvC,IAAM,OAAO,oBAAoB,SAAUA,CAAY,CAChE,EAAG,EAAE,EAEC,MAAAO,EAAYJ,GAAoBP,IAAkBO,EAExD,OAGIK,EAAA,KAAAC,WAAA,WAAAC,MAAC,KAAE,KAAK,gBAAgB,UAAWC,EAAO,WAAY,SAEtD,yBAEAH,OAAC,OAAI,UAAWG,EAAO,IAAK,KAAK,aAAa,aAAW,kBACvD,UAACD,MAAA,KAAE,KAAK,QAAQ,UAAWC,EAAO,KAAM,aAAW,oBAAoB,SAEvE,iBAAI,kBAAS,KAAG,WAAWA,EAAO,MAAO,KAAK,OAC5C,UAAAD,MAAC,KACC,UAAAA,EAAA,IAAC,KACC,KAAK,QACL,UAAW,GAAGC,EAAO,OAAO,IAAIJ,EAAS,MAAM,EAAII,EAAO,OAAS,EAAE,GACrE,eAAcJ,EAAS,MAAM,EAAI,OAAS,OAC3C,kBAGH,QACC,KACC,UAAAG,EAAA,IAAC,KACC,KAAK,SACL,UAAW,GAAGC,EAAO,OAAO,IAAIJ,EAAS,OAAO,EAAII,EAAO,OAAS,EAAE,GACtE,eAAcJ,EAAS,OAAO,EAAI,OAAS,OAC5C,mBAGH,QACC,KACC,UAAAG,EAAA,IAAC,KACC,KAAK,gBACL,UAAW,GAAGC,EAAO,OAAO,IAAIJ,EAAS,cAAc,EAAII,EAAO,OAAS,EAAE,GAC7E,eAAcJ,EAAS,cAAc,EAAI,OAAS,OACnD,yBAGH,GACF,GACF,IACF,CAEJ,CC7DA,MAAMK,UAA4BC,WAAwB,CACxD,YAAYC,EAAc,CACxB,MAAMA,CAAK,EACN,WAAQ,CAAE,SAAU,EAAM,EAGjC,OAAO,yBAAyBC,EAAqB,CAE5C,OAAE,SAAU,GAAM,MAAAA,CAAM,EAEjC,kBAAkBC,EAAeC,EAAsB,CAE7C,cAAM,cAAeA,CAAS,EAOxC,QAAS,OACH,YAAK,MAAM,SAEN,KAAK,MAAM,UAChBT,EAAA,KAAC,OACC,MAAO,CACL,QAAS,OACT,UAAW,SACX,MAAO,OACP,SAAU,OACV,gBAAiB,UACjB,OAAQ,oBACR,aAAc,MACd,OAAQ,MACV,EAEA,UAAAE,MAAC,KAAE,SAA2C,gDAC9CF,OAAC,WAAQ,MAAO,CAAE,UAAW,OAAQ,SAAU,MAC7C,YAAAE,MAAC,WAAQ,SAAiB,6BACzB,IAAE,OAAO,CAAE,OAAQ,OAAW,0BACjB,KAAK,MAAM,eAAiB,WAC1C,EACCA,MAAA,KAAE,MAAO,CAAE,OAAQ,QAAS,WAAY,aACtC,UAAAQ,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,OACrB,GACF,IACF,EAIG,KAAK,MAAM,SAEtB,qbCvDA,SAASC,GAAe,CAAE,SAAAC,EAAU,MAAAC,EAAQ,GAAoD,CACxF,MAAAC,EAAWC,SAAc,IAAI,EACxB,OAAAC,EAAA,CAACC,EAAGC,IAAU,CACnBJ,EAAS,UACXA,EAAS,QAAQ,SAAS,GAAKI,EAAQL,EAAQ,GAEjD,CACD,EAEOX,MAAA,SAAM,IAAKY,EAAW,SAAAF,CAAS,EACzC,CAEgB,SAAAO,GAAY,CAAE,SAAAC,GAA8B,CAC1D,cACG,MAAI,WAAW,GAAGjB,EAAO,WAAW,gBAAiB,mBACpDH,EAAA,KAACqB,EAAA,CACC,UAAWlB,EAAO,WAClB,OAAQ,CAAE,SAAU,CAAC,EAAG,EAAG,GAAG,EAAG,IAAK,EAAG,EAC1C,qBAAQD,MAAC,eAAa,WAAW,EAAK,GACrCA,MAAC,oBAAiB,SAAU,CAAC,EAAG,EAAG,CAAC,EAAG,UAAW,GAAK,EACvDA,MAAC,mBAAiB,UAAU,CAAC,GAAI,EAAG,CAAC,EAAG,MAAM,UAAU,UAAW,EAAK,GACxEA,MAAC,mBAAiB,UAAU,CAAC,EAAG,GAAI,CAAC,EAAG,MAAM,UAAU,UAAW,EAAK,SACrEE,EAAoB,eAAc,mBAEnC,SAACJ,EAAA,KAAAsB,WAAA,CAAS,SAAU,KAAM,gCAAaC,EAAM,gBAAgB,EAAK,kBAAmB,GAAK,MAAO,GAAK,2BAAcvB,OAACW,GAAe,OAAO,GAAK,6BAAgBX,EAAA,KAAC,SACzJ,MAAOoB,EAAW,CAAC,KAAO,KAAO,IAAK,EAAI,CAAC,KAAO,KAAO,IAAK,EAC9D,SAAU,CAAC,EAAG,GAAK,CAAC,EACrB,+BAAkBlB,EAAA,IAACsB,EAAA,CAChB,SAAU,EACV,QAAQ,OACR,eAAgB,IAClB,GACF,CACF,GACF,IACF,CACF,IACF,EAAS,SACRtB,EAAA,WAAI,UAAWC,EAAO,mBACrB,SAAAD,MAAC,KAAG,WAAWC,EAAO,SAAU,cAAY,OAAO,eAAI,GACzD,EAAM,SACLD,EAAA,WAAI,UAAWC,EAAO,YACrB,SAAAD,EAAA,IAAC,UACC,UAAW,GAAGC,EAAO,SAAS,6BAC9B,aAAW,8BACZ,uBAGH,EAAM,SACLD,EAAA,SAAE,UAAW,GAAGC,EAAO,kBAAkB,IAAIiB,EAAWjB,EAAO,OAAS,EAAE,GAAI,SAE/E,4CAGCD,EAAA,SAAE,UAAW,GAAGC,EAAO,iBAAiB,IAAIiB,EAAWjB,EAAO,OAAS,EAAE,GAAI,SAE9E,4FAGAH,OAAC,MAAI,WAAWG,EAAO,UAAW,QAAQ,YAAY,KAAK,MAAM,aAAW,cAC1E,UAACD,MAAA,QAAK,EAAE,WAAY,GACpBA,MAAC,WAAS,QAAO,kBAAmB,GACtC,IACF,CAEJ,CCtE4BuB,OAAK,IAAMC,EAAA,WAAO,gCAAiB,EAAC,KAAAC,KAAA,gCAChCF,OAAK,IAAMC,EAAA,WAAO,gCAA4B,OAAAC,KAAA,+BAAE,KAAKC,IAAW,CAAE,QAASA,EAAO,kBAAmB,CAAC,EAC1GH,OAAK,IAAMC,EAAA,WAAO,gCAAwB,OAAAC,KAAA,+BAAE,KAAKC,IAAW,CAAE,QAASA,EAAO,cAAe,CAAC,EAGnH,MAAMC,GAAaJ,EAAA,KAAK,UAAM,OAAO,0BAAuB,8BAAE,KAAKG,IAAW,CAAE,QAASA,EAAO,YAAa,CAAC,EACxGE,GAAsBL,EAAA,KAAK,UAAM,OAAO,mCAAgC,4BAAE,KAAKG,IAAW,CAAE,QAASA,EAAO,qBAAsB,CAAC,EAKzI,SAASG,GAA2B,CAEvC,OAAA7B,EAAA,IAAC,OAAI,MAAO,CACV,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,OAAQ,OACR,UAAW,QACX,MAAO,UACP,WAAY,gCACZ,SAAU,SACV,QAAS,EACX,EACE,SAACF,OAAA,OAAI,MAAO,CACV,QAAS,OACT,cAAe,SACf,WAAY,SACZ,IAAK,MAEL,YAAAE,MAAC,OAAI,MAAO,CACV,MAAO,OACP,OAAQ,OACR,OAAQ,oBACR,UAAW,oBACX,aAAc,MACd,UAAW,2BACV,EACHA,MAAC,QAAK,SAAgC,sCACxC,CACF,EAEJ,CC5CO,SAAS8B,GAAmB,CAAE,cAAAC,EAAgB,IAA+B,CAC5E,MAAAC,EAAenB,SAAuB,IAAI,EAEhDxB,mBAAU,IAAM,CACV,IAAC2C,EAAa,QAAS,OAE3B,MAAMC,EAAYD,EAAa,QACzBE,EAA8B,CAAC,EAGrC,QAASC,EAAI,EAAGA,EAAIJ,EAAeI,IAAK,CAChC,MAAAC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,WACrBA,EAAS,MAAM,QAAU;AAAA;AAAA,iBAEd,KAAK,SAAW,EAAI,CAAC;AAAA,kBACpB,KAAK,SAAW,EAAI,CAAC;AAAA,kEAC2B,KAAK,SAAW,GAAM,EAAG;AAAA;AAAA,gBAE3E,KAAK,OAAO,EAAI,GAAG;AAAA,2BACR,KAAK,OAAO,EAAI,EAAE;AAAA,8BACf,KAAK,SAAW,GAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,QAO/CH,EAAU,YAAYG,CAAQ,EAC9BF,EAAU,KAAKE,CAAQ,EAIzB,MAAO,IAAM,CACXF,EAAU,QAAoBE,GAAA,CACxBA,EAAS,YACFA,EAAA,WAAW,YAAYA,CAAQ,CAC1C,CACD,CACH,GACC,CAACL,CAAa,CAAC,EAGhB/B,EAAA,IAAC,OACC,IAAKgC,EACL,UAAU,cACV,MAAO,CACL,SAAU,QACV,IAAK,EACL,KAAM,EACN,MAAO,OACP,OAAQ,OACR,cAAe,OACf,OAAQ,IACR,SAAU,SACZ,CACF,CAEJ,CC7DO,MAAMK,GAAgB,IAAsB,CACjD,KAAM,CAACnB,EAAUoB,CAAW,EAAIlD,WAAS,EAAK,EACxC,CAACmD,EAAUC,CAAW,EAAIpD,WAAS,EAAK,EAE9CC,mBAAU,IAAM,CACd,MAAMoD,EAAkB,IAAM,CAC5B,MAAMC,EAAQ,OAAO,WACrBJ,EAAYI,GAAS,GAAG,EACZF,EAAAE,EAAQ,KAAOA,GAAS,IAAI,CAC1C,EAEgB,OAAAD,EAAA,EACT,wBAAiB,SAAUA,CAAe,EAC1C,IAAM,OAAO,oBAAoB,SAAUA,CAAe,CACnE,EAAG,EAAE,EAEE,CAAE,SAAAvB,EAAU,SAAAqB,CAAS,CAC9B,ECqCA,eAAsBI,GAAsBC,EAAqD,CACzF,MAAAC,EAAOD,GAAe,SAAS,KAC/BE,EAA+B,CAAC,EAElC,IAEF,QAAQ,MAAM,oCAAoC,EAI5C,MAAAC,EAAW,CAACC,EAAcC,IAAwC,CAC9D,cAAM,mCAAmCD,CAAI,EAAE,EACnD,IACF,MAAME,EAAUD,EAAQ,EACxB,eAAQ,MAAM,KAAKD,CAAI,qBAAqBE,EAAQ,MAAM,eAAe,EAClEA,QACA7C,EAAO,CACd,eAAQ,KAAK,KAAK2C,CAAI,iBAAkB3C,CAAK,EACtC,CAAC,EAEZ,EAEOyC,EAAA,KAAK,GAAGC,EAAS,iBAAkB,IAAMI,GAAmBN,CAAI,CAAC,CAAC,EAClEC,EAAA,KAAK,GAAGC,EAAS,sBAAuB,IAAMK,GAAwBP,CAAI,CAAC,CAAC,EAC5EC,EAAA,KAAK,GAAGC,EAAS,cAAe,IAAMM,GAAgBR,CAAI,CAAC,CAAC,EAC5DC,EAAA,KAAK,GAAGC,EAAS,oBAAqB,IAAMO,GAAsBT,CAAI,CAAC,CAAC,EACxEC,EAAA,KAAK,GAAGC,EAAS,mBAAoB,IAAMQ,GAAqBV,CAAI,CAAC,CAAC,EACtEC,EAAA,KAAK,GAAGC,EAAS,iBAAkB,IAAMS,GAAkBX,CAAI,CAAC,CAAC,EACjEC,EAAA,KAAK,GAAGC,EAAS,cAAe,IAAMU,GAAgBZ,CAAI,CAAC,CAAC,EAC5DC,EAAA,KAAK,GAAGC,EAAS,qBAAsB,IAAMW,GAAuBb,CAAI,CAAC,CAAC,EAC1EC,EAAA,KAAK,GAAGC,EAAS,qBAAsB,IAAMY,GAAuBd,CAAI,CAAC,CAAC,EAC1EC,EAAA,KAAK,GAAGC,EAAS,aAAc,IAAMa,GAAef,CAAI,CAAC,CAAC,QAC1DxC,EAAO,CACN,aAAK,0CAA2CA,CAAK,EAG/D,MAAMwD,EAAWf,EAAO,OAAYX,KAAE,SAAW,UAAU,EACrD2B,EAAUhB,EAAO,OAAYX,KAAE,SAAW,SAAS,EACnD4B,EAAWjB,EAAO,OAAYX,KAAE,SAAW,UAAU,EACrD6B,EAAQlB,EAAO,OAAYX,KAAE,SAAW,OAAO,EAE/C8B,EAASJ,EAAS,OAASC,EAAQ,OACnCI,EAAWH,EAAS,OAASC,EAAM,OACnCG,EAAQF,EAASC,EACjBE,EAAS,KAAK,IAAI,EAAG,GAAKD,CAAK,EAM/BE,EAAY,GACZC,EAAkB,KAAK,IAAIT,EAAS,OAAS,GAAI,EAAE,EACnDU,EAAiB,KAAK,IAAIT,EAAQ,OAAS,EAAG,EAAE,EAChDU,EAAkB,KAAK,IAAIT,EAAS,OAAS,EAAG,EAAE,EAClDU,EAAe,KAAK,IAAIT,EAAM,OAAS,EAAG,CAAC,EAE3CU,EAAQ,KAAK,IAAI,EAAGL,EAAYC,EAAkBC,EAAiBC,EAAkBC,CAAY,EAGvG,IAAIE,EAA2C,gBAC/C,OAAID,GAAS,IAAMb,EAAS,SAAW,EACxBc,EAAA,KACJD,GAAS,IAAMb,EAAS,QAAU,IAC9Bc,EAAA,KAGR,CACL,OAAAP,EACA,OAAAH,EACA,SAAAC,EACA,OAAApB,EACA,MAAA4B,EACA,WAAAC,CACF,CACF,CAKA,SAASxB,GAAmBN,EAAqC,CAC/D,MAAMC,EAA+B,CAAC,EAGtC,OAFqBD,EAAK,iBAAiB,+DAA+D,EAE7F,QAAmBnD,GAAA,OAC1B,IAEI,MAAAO,EAAS,iBAAiBP,CAAO,EACnC,GAAAO,EAAO,UAAY,QAAUA,EAAO,aAAe,UAAY,GAACO,EAAAd,EAAQ,cAAR,MAAAc,EAAqB,QACvF,OAII,MAAAoE,EAAW,WAAW3E,EAAO,QAAQ,EAC3C,GAAI2E,EAAW,EACb,OAGF,MAAMC,EAAY5E,EAAO,MACnB6E,EAAkBC,GAA4BrF,CAAO,EAE3D,GAAImF,GAAaC,EAAiB,CAC1B,MAAAE,EAAWC,GAAuBJ,EAAWC,CAAe,EAG5DI,EAFcN,GAAY,IAAOA,GAAY,KAAO3E,EAAO,aAAe,QAAU,SAASA,EAAO,UAAU,GAAK,KAErF,EAAM,IAItC+E,EAAWE,EAAgB,IAC7BpC,EAAO,KAAK,CACV,QAAApD,EACA,KAAM,QACN,KAAM,oBACN,YAAa,sCAAsCsF,EAAS,QAAQ,CAAC,CAAC,iBAAiBE,CAAa,MACpG,OAAQF,EAAYE,EAAgB,GAAO,WAAa,UACxD,eAAgB,mCAAmCL,CAAS,qBAAqBC,CAAe,IACjG,CACH,OAEY,EAEhB,CACD,EAEMhC,CACT,CAKA,SAASM,GAAwBP,EAAqC,CACpE,MAAMC,EAA+B,CAAC,EAGtC,OAF4BD,EAAK,iBAAiB,2DAA2D,EAEzF,QAAmBnD,GAAA,CAC/B,MAAAyF,EAAWzF,EAAQ,aAAa,UAAU,EAC1C0F,EAAsB,CAAC,SAAU,IAAK,QAAS,SAAU,UAAU,EAAE,SAAS1F,EAAQ,QAAQ,aAAa,EAG7GyF,GAAY,SAASA,CAAQ,EAAI,GACnCrC,EAAO,KAAK,CACV,QAAApD,EACA,KAAM,UACN,KAAM,oBACN,YAAa,0DACb,OAAQ,WACR,eAAgB,oEACjB,EAIC,CAAC0F,GAAuBD,IAAa,MACnCzF,EAAQ,aAAa,SAAS,GAAKA,EAAQ,aAAa,MAAM,IAAM,WACtEoD,EAAO,KAAK,CACV,QAAApD,EACA,KAAM,QACN,KAAM,oBACN,YAAa,iDACb,OAAQ,UACR,eAAgB,+CACjB,EAKC,MAAAO,EAAS,iBAAiBP,EAAS,QAAQ,EAC7CO,EAAO,UAAY,QAAU,CAACA,EAAO,WAAa,CAACA,EAAO,QAC5D6C,EAAO,KAAK,CACV,QAAApD,EACA,KAAM,UACN,KAAM,oBACN,YAAa,kCACb,OAAQ,WACR,eAAgB,mDACjB,CACH,CACD,EAEMoD,CACT,CAKA,SAASO,GAAgBR,EAAqC,CAC5D,MAAMC,EAA+B,CAAC,EAItC,OADgBD,EAAK,iBAAiB,QAAQ,EACtC,QAAkBwC,GAAA,OAElB,MAAApF,EAAS,iBAAiBoF,CAAM,EAMlC,GALApF,EAAO,UAAY,QAAUA,EAAO,aAAe,UAKnDoF,EAAO,QAAQ,oEAAoE,EACrF,OAGI,MAAAC,GAAU9E,EAAA6E,EAAO,cAAP,YAAA7E,EAAoB,OAC9B+E,EAAeF,EAAO,aAAa,YAAY,EAC/CG,EAAoBH,EAAO,aAAa,iBAAiB,EACzDI,EAAWJ,EAAO,aAAa,OAAO,EAGtCK,EAAmBL,EAAO,SAAS,SAAW,GACjDA,EAAO,cAAc,mCAAmC,IAAM,MAC/D,CAACC,EAEH,GAAI,CAACA,GAAW,CAACC,GAAgB,CAACC,GAAqB,CAACC,EAAU,CAE1D,MAAAE,EAASD,EAAmB,UAAY,WAE9C5C,EAAO,KAAK,CACV,QAASuC,EACT,KAAM,QACN,KAAM,oBACN,YAAa,gCACb,OAAAM,EACA,eAAgB,6DACjB,EACH,CACD,EAGc9C,EAAK,iBAAiB,KAAK,EACnC,QAAe+C,GAAA,SAEd,MAAA3F,EAAS,iBAAiB2F,CAAG,EACnC,GAAI3F,EAAO,UAAY,QAAUA,EAAO,aAAe,SACrD,OAIF,MAAMyC,EAAQkD,EAAI,OAAS,SAAS3F,EAAO,KAAK,GAAK,EAC/C4F,EAASD,EAAI,QAAU,SAAS3F,EAAO,MAAM,GAAK,EACpD,GAAAyC,EAAQ,IAAMmD,EAAS,GACzB,OAGI,MAAAC,EAAMF,EAAI,aAAa,KAAK,EAC5BG,EAAYH,EAAI,aAAa,YAAY,EACzCI,EAAOJ,EAAI,aAAa,MAAM,EAG9BK,EAA0B,IAC9BC,GAAA1F,EAAAoF,EAAI,QAAQ,WAAW,IAAvB,YAAApF,EAA0B,cAA1B,MAAA0F,EAAuC,QACvCN,EAAI,QAAQ,cAAc,GAGxBE,IAAQ,MAAQ,CAACC,GAAaC,IAAS,gBAAkB,CAACC,GAC5DnD,EAAO,KAAK,CACV,QAAS8C,EACT,KAAM,QACN,KAAM,oBACN,YAAa,8BACb,OAAQ,UACR,eAAgB,wEACjB,CACH,CACD,EAGoB/C,EAAK,iBAAiB,8CAA8C,EAC5E,QAAmBsD,GAAA,CAExB,MAAAlG,EAAS,iBAAiBkG,CAAO,EACvC,GAAIlG,EAAO,UAAY,QAAUA,EAAO,aAAe,SACrD,OAGI,MAAAmG,EAAKD,EAAQ,aAAa,IAAI,EAC9BJ,EAAYI,EAAQ,aAAa,YAAY,EAC7CE,EAAiBF,EAAQ,aAAa,iBAAiB,EACvDG,EAAQH,EAAQ,aAAa,OAAO,EACpCI,EAAeJ,EAA6B,YAElD,IAAIK,EAAW,GACXJ,IAEFI,EAAW,CAAC,CADE3D,EAAK,cAAc,cAAcuD,CAAE,IAAI,GAKvD,MAAMK,EAAmBN,EAAQ,QAAQ,OAAO,IAAM,KAElD,IAACK,GAAY,CAACT,GAAa,CAACM,GAAkB,CAACC,GAAS,CAACG,EAAkB,CAEvE,MAAAd,EAASY,EAAc,WAAa,UAE1CzD,EAAO,KAAK,CACV,QAASqD,EACT,KAAM,QACN,KAAM,oBACN,YAAaI,EAAc,4CAA8C,uCACzE,OAAAZ,EACA,eAAgB,gDACjB,EACH,CACD,EAEM7C,CACT,CAKA,SAASQ,GAAsBT,EAAqC,CAClE,MAAMC,EAA+B,CAAC,EAChC4D,EAAW,MAAM,KAAK7D,EAAK,iBAAiB,wBAAwB,CAAC,EAEvE,GAAA6D,EAAS,SAAW,EACtB,OAAA5D,EAAO,KAAK,CACV,QAASD,EACT,KAAM,UACN,KAAM,oBACN,YAAa,4BACb,OAAQ,WACR,eAAgB,gDACjB,EACMC,EAIT,MAAM6D,EAAUD,EAAS,UAAYE,EAAE,UAAY,IAAI,EAAE,OACrDD,IAAY,EACd7D,EAAO,KAAK,CACV,QAASD,EACT,KAAM,UACN,KAAM,oBACN,YAAa,sBACb,OAAQ,WACR,eAAgB,2CACjB,EACQ8D,EAAU,GACnB7D,EAAO,KAAK,CACV,QAASD,EACT,KAAM,UACN,KAAM,oBACN,YAAa,6BACb,OAAQ,QACR,eAAgB,gDACjB,EAIH,IAAIgE,EAAgB,EACpB,OAAAH,EAAS,QAAmBI,GAAA,CAC1B,MAAMC,EAAQ,SAASD,EAAQ,QAAQ,OAAO,CAAC,CAAC,EAE5CD,EAAgB,GAAKE,EAAQF,EAAgB,GAC/C/D,EAAO,KAAK,CACV,QAASgE,EACT,KAAM,UACN,KAAM,oBACN,YAAa,2BAA2BD,CAAa,QAAQE,CAAK,IAClE,OAAQ,QACR,eAAgB,qDACjB,EAGaF,EAAAE,CAAA,CACjB,EAEMjE,CACT,CAKA,SAASS,GAAqBV,EAAqC,CACjE,MAAMC,EAA+B,CAAC,EAItC,OADeD,EAAK,iBAAiB,+CAA+C,EAC7E,QAAiBmE,GAAA,CACIA,EAAM,iBAC9B,0EACF,EAEsB,SAAW,GAC/BlE,EAAO,KAAK,CACV,QAASkE,EACT,KAAM,UACN,KAAM,oBACN,YAAa,yCACb,OAAQ,WACR,eAAgB,uDACjB,CACH,CACD,EAEMlE,CACT,CAKA,SAASU,GAAkBX,EAAqC,CAC9D,MAAMC,EAA+B,CAAC,EAGtC,OAFeD,EAAK,iBAAiB,UAAU,EAExC,QAAe+C,GAAA,CACd,MAAAE,EAAMF,EAAI,aAAa,KAAK,EAC5BqB,EAAMrB,EAAI,aAAa,KAAK,GAAK,IAGnCE,EAAI,YAAY,EAAE,SAAS,OAAO,GAAKA,EAAI,cAAc,SAAS,SAAS,GAAKA,EAAI,cAAc,SAAS,OAAO,IACpHhD,EAAO,KAAK,CACV,QAAS8C,EACT,KAAM,UACN,KAAM,oBACN,YAAa,4DACb,OAAQ,QACR,eAAgB,6DACjB,GAICqB,EAAI,SAASnB,CAAG,GAAKA,EAAI,SAAS,GAAG,IACvChD,EAAO,KAAK,CACV,QAAS8C,EACT,KAAM,UACN,KAAM,oBACN,YAAa,oCACb,OAAQ,WACR,eAAgB,+CACjB,EAICE,EAAI,OAAS,KACfhD,EAAO,KAAK,CACV,QAAS8C,EACT,KAAM,UACN,KAAM,oBACN,YAAa,0CACb,OAAQ,QACR,eAAgB,mDACjB,CACH,CACD,EAEM9C,CACT,CAKA,SAASW,GAAgBZ,EAAqC,CAC5D,MAAMC,EAA+B,CAAC,EAItC,OADuBD,EAAK,iBAAiB,uDAAuD,EACrF,QAAiBqE,GAAA,WACxB,MAAAC,EAAeD,EAAM,aAAa,eAAe,IAC1BhB,GAAA1F,EAAA0G,EAAM,QAAQ,OAAO,IAArB,YAAA1G,EAAwB,cAAxB,YAAA0F,EAAqC,SAAS,SAC9CkB,EAAAF,EAAM,aAAa,YAAY,IAA/B,YAAAE,EAAkC,SAAS,cAC3CD,IAAiB,QAG5CrE,EAAO,KAAK,CACV,QAASoE,EACT,KAAM,UACN,KAAM,oBACN,YAAa,uCACb,OAAQ,WACR,eAAgB,oDACjB,CACH,CACD,EAEMpE,CACT,CAKA,SAASY,GAAuBb,EAAqC,CACnE,MAAMC,EAA+B,CAAC,EAMlC,OAHqBD,EAAK,iBAAiB,2DAA2D,EAGrF,OAAS,IAEI,MAAM,KAAK,SAAS,WAAW,EAAE,KAAcwE,GAAA,CACzE,IACF,OAAO,MAAM,KAAKA,EAAM,QAAQ,EAAE,KAChCC,GAAA,cAAA9G,EAAA8G,EAAK,UAAL,YAAA9G,EAAc,SAAS,0BACzB,OACM,CACC,SACT,CACD,GAGCsC,EAAO,KAAK,CACV,QAASD,EACT,KAAM,UACN,KAAM,oBACN,YAAa,0DACb,OAAQ,WACR,eAAgB,wDACjB,GAIEC,CACT,CAKA,SAASa,GAAuBd,EAAqC,CACnE,MAAMC,EAA+B,CAAC,EAKtC,OAFgBD,EAAK,cAAc,qBAAqB,GAGtDC,EAAO,KAAK,CACV,QAASD,EACT,KAAM,UACN,KAAM,oBACN,YAAa,yBACb,OAAQ,WACR,eAAgB,yDACjB,EAImBA,EAAK,iBAAiB,6BAA6B,EAC3D,QAAe0E,GAAA,CACvB,CAACA,EAAI,aAAa,MAAM,GAAK,CAACA,EAAI,aAAa,UAAU,GAC3DzE,EAAO,KAAK,CACV,QAASyE,EACT,KAAM,QACN,KAAM,oBACN,YAAa,8CACb,OAAQ,UACR,eAAgB,6DACjB,CACH,CACD,EAEMzE,CACT,CAKA,SAASc,GAAef,EAAqC,CAC3D,MAAMC,EAA+B,CAAC,EAGtC,OADiBD,EAAK,cAAc,kCAAkC,GAEpEC,EAAO,KAAK,CACV,QAASD,EACT,KAAM,UACN,KAAM,oBACN,YAAa,6CACb,OAAQ,WACR,eAAgB,iEACjB,EAGIC,CACT,CAIA,SAASiC,GAA4BrF,EAAiC,CAChE,IACF,IAAI8H,EAA0B9H,EAC1B+H,EAAuB,GACvB3C,EAAkB,mBAGtB,KAAO0C,GAAWA,IAAY,SAAS,MAAQ,CAACC,GAAsB,CAIpE,GAFA3C,EADe,iBAAiB0C,CAAO,EACd,gBAErB1C,GAAmBA,IAAoB,oBAAsBA,IAAoB,cAAe,CAC3E2C,EAAA,GACvB,MAGFD,EAAUA,EAAQ,cAIpB,OAAKC,IACH3C,EAAkB,iBAAiB,SAAS,IAAI,EAAE,iBAAmB,sBAGhEA,QACAzE,EAAO,CACN,oBAAK,4CAA6CA,CAAK,EACxD,qBAEX,CAEA,SAAS4E,GAAuByC,EAAgBC,EAAwB,CAClE,IACI,MAAAC,EAAOC,EAAWH,CAAM,EACxBI,EAAOD,EAAWF,CAAM,EAE9B,GAAI,CAACC,GAAQ,CAACE,EAAa,WAErB,MAAAC,EAAKC,EAAqBJ,CAAI,EAC9BK,EAAKD,EAAqBF,CAAI,EAE9BI,EAAU,KAAK,IAAIH,EAAIE,CAAE,EACzBE,EAAS,KAAK,IAAIJ,EAAIE,CAAE,EAEtB,OAAAC,EAAU,MAASC,EAAS,WAC7B9H,EAAO,CACN,oBAAK,oCAAqCA,CAAK,EAChD,IAEX,CAEA,SAASwH,EAAWO,EAAgD,CAC9D,IAEE,IAAAC,EAAQD,EAAM,MAAM,iDAAiD,EACzE,GAAIC,EACF,MAAO,CAAC,SAASA,EAAM,CAAC,CAAC,EAAG,SAASA,EAAM,CAAC,CAAC,EAAG,SAASA,EAAM,CAAC,CAAC,CAAC,EAIhE,GAAAD,EAAM,WAAW,GAAG,EAAG,CACrB,IAAAE,EAAMF,EAAM,MAAM,CAAC,EAMnB,GAJAE,EAAI,SAAW,IACXA,IAAI,MAAM,EAAE,EAAE,OAAYC,EAAOA,CAAI,EAAE,KAAK,EAAE,GAGlDD,EAAI,SAAW,EAAG,CACpB,MAAME,EAAI,SAASF,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EAChCG,EAAI,SAASH,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EAChCI,EAAI,SAASJ,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EAC/B,OAACE,EAAGC,EAAGC,CAAC,EACjB,CAIF,MAAMC,EAAwD,CAC5D,MAAS,CAAC,IAAK,IAAK,GAAG,EACvB,MAAS,CAAC,EAAG,EAAG,CAAC,EACjB,IAAO,CAAC,IAAK,EAAG,CAAC,EACjB,MAAS,CAAC,EAAG,IAAK,CAAC,EACnB,KAAQ,CAAC,EAAG,EAAG,GAAG,EAClB,OAAU,CAAC,IAAK,IAAK,CAAC,CAExB,EAEMC,EAAaR,EAAM,YAAY,EACrC,OAAIQ,KAAcD,EACTA,EAAYC,CAAU,EAGxB,CAAC,EAAG,EAAG,CAAC,QACRvI,EAAO,CACN,oBAAK,uBAAwB+H,EAAO/H,CAAK,EAC1C,KAEX,CAEA,SAAS2H,EAAqB,CAACQ,EAAGC,EAAGC,CAAC,EAAqC,CACrE,IAEI,MAAAG,EAAO,CAACL,EAAI,IAAKC,EAAI,IAAKC,EAAI,GAAG,EAAE,IAASI,GAEzCA,GAAK,OAAUA,EAAI,MAAQ,KAAK,KAAKA,EAAI,MAAS,MAAO,GAAG,CACpE,EAGM,aAASD,EAAK,CAAC,EAAI,MAASA,EAAK,CAAC,EAAI,MAASA,EAAK,CAAC,QACrDxI,EAAO,CACN,oBAAK,wCAAyCA,CAAK,EACpD,GAEX,CA0EO,SAAS0I,GAAuBC,EAAmC,CACxE,QAAQ,MAAM,+BAA+B,EAC7C,QAAQ,IAAI,UAAUA,EAAO,KAAK,sBAAsBA,EAAO,UAAU,EAAE,EACnE,YAAI,WAAWA,EAAO,MAAM,cAAcA,EAAO,MAAM,gBAAgBA,EAAO,QAAQ,EAAE,EAE5FA,EAAO,OAAO,OAAS,IACzB,QAAQ,MAAM,eAAe,EAC7BA,EAAO,OAAO,QAAQ,CAACC,EAAOC,IAAW,CACvC,MAAMC,EAAOF,EAAM,SAAW,WAAa,KAAOA,EAAM,SAAW,UAAY,KAAOA,EAAM,SAAW,WAAa,KAAO,KACnH,uBAAe,GAAGE,CAAI,IAAIF,EAAM,OAAO,YAAa,MAAKA,EAAM,WAAW,EAAE,EAC5E,YAAI,QAASA,EAAM,IAAI,EACvB,YAAI,kBAAmBA,EAAM,cAAc,EAC3C,YAAI,WAAYA,EAAM,OAAO,EACrC,QAAQ,SAAS,EAClB,EACD,QAAQ,SAAS,GAEjB,QAAQ,SAAS,CACrB,CC1yBgB,SAAAG,GAAsBC,EAAwC,GAA6B,CACnG,MACJ,QAAAC,EAAU,GACV,QAAAC,EAAU,GACV,aAAAC,EAAe,GACf,WAAAC,EAAa,IACb,aAAAC,EAAe,QACbL,EAEE,CAACL,EAAQW,CAAS,EAAIvK,WAAqC,IAAI,EAC/D,CAACwK,EAAWC,CAAY,EAAIzK,WAAS,EAAK,EAC1C,CAAC0K,EAASC,CAAU,EAAI3K,WAAsB,IAAI,EAElD4K,EAAcnJ,SAAe,EAC7BoJ,EAAmBpJ,SAAiB,QAAM,EAG1CqJ,EAAW,SAA2B,CACtC,MAACZ,GAAWM,GAEhB,CAAAC,EAAa,EAAI,EAEb,IACF,MAAMjH,EAAc,SAAS,cAAc8G,CAAY,GAAgB,SAAS,KAC1ES,EAAc,MAAMxH,GAAsBC,CAAW,EAE3D+G,EAAUQ,CAAW,EACVJ,EAAA,IAAI,IAAM,EAEjBP,GACFT,GAAuBoB,CAAW,QAoB7B9J,EAAO,CACN,cAAM,8BAA+BA,CAAK,SAClD,CACAwJ,EAAa,EAAK,GAEtB,EAGMO,EAAc,IAAY,CAC9BT,EAAU,IAAI,EACdI,EAAW,IAAI,CACjB,EAGMM,EAAiB,IAAY,CAC7BL,EAAY,SACd,aAAaA,EAAY,OAAO,EAGtBA,EAAA,QAAU,WAAW,IAAM,CAC5BE,EAAA,GACRT,CAAU,CACf,EAGApK,mBAAU,IAAM,CACV,IAACiK,GAAW,CAACC,EAAS,OAE1B,MAAMe,EAAW,IAAI,iBAAkBC,GAAc,CAEzBA,EAAU,KAAKC,GACvCA,EAAS,OAAS,cACjBA,EAAS,WAAW,OAAS,GAAKA,EAAS,aAAa,OAAS,IAClEA,EAAS,OAAS,cAClB,CAAC,aAAc,kBAAmB,mBAAoB,OAAQ,WAAY,KAAK,EAAE,SAASA,EAAS,eAAiB,EAAE,CACxH,IAGmBP,EAAA,YAAc,KAChBI,EAAA,EACjB,CACD,EAEKzH,EAAc,SAAS,cAAc8G,CAAY,GAAK,SAAS,KACrE,OAAAY,EAAS,QAAQ1H,EAAa,CAC5B,UAAW,GACX,QAAS,GACT,WAAY,GACZ,gBAAiB,CAAC,aAAc,kBAAmB,mBAAoB,OAAQ,WAAY,MAAO,OAAO,EAC1G,EAGD,WAAWyH,EAAgB,GAAG,EAEvB,IAAM,CACXC,EAAS,WAAW,EAChBN,EAAY,SACd,aAAaA,EAAY,OAAO,CAEpC,GACC,CAACV,EAASC,EAASG,EAAcD,CAAU,CAAC,EAG/CpK,YAAU,IACD,IAAM,CACP2K,EAAY,SACd,aAAaA,EAAY,OAAO,CAEpC,EACC,EAAE,EAEE,CACL,OAAAhB,EACA,UAAAY,EACA,QAAAE,EACA,SAAAI,EACA,YAAAE,CACF,CACF,CAMgB,SAAAK,GAAwBnB,EAAmB,GAA2B,CAGpF,KAAM,CAACoB,EAAiBC,CAAkB,EAAIvL,WAASkK,GAAW,EAAa,EAEzE,CAAE,OAAAN,EAAQ,UAAAY,EAAW,SAAAM,CAAA,EAAad,GAAsB,CAC5D,QAAAE,EACA,QAAS,GACT,aAAc,GACd,WAAY,IACb,EAGDjK,YAAU,IAAM,CACR,MAAAuL,EAAsBC,GAAa,CACvC,MAAMC,EAAcD,EAChBC,EAAY,QAAUA,EAAY,OAAO,UAAY,OACpCH,EAAAG,EAAY,OAAO,OAAO,EAE1BH,EAAAI,GAAQ,CAACA,CAAI,CAEpC,EAES,iCAAiB,qBAAsBH,CAAkB,EAE3D,IAAM,CACF,6BAAoB,qBAAsBA,CAAkB,CACvE,CACF,EAAG,EAAE,EAELvL,YAAU,IAAM,WACd,GAAI,CAACiK,EAAS,OAGV,IAAA0B,EAAS,SAAS,eAAe,uBAAuB,EACxDC,EAAc,GAGlB,GAAI,CAACP,EAAiB,CAChBM,GACFA,EAAO,OAAO,EAEhB,OAGGA,IACMA,EAAA,SAAS,cAAc,KAAK,EACrCA,EAAO,GAAK,wBACZA,EAAO,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAkBd,cAAK,YAAYA,CAAM,GAIlC,MAAME,EAAgBlC,GAAU,CAC9B,MAAO,IACP,WAAY,KACZ,OAAQ,EAIV,EAEM,CAAE,MAAAtE,EAAO,WAAAC,EAAY,OAAA7B,CAAW,EAAAoI,EAChCC,EAAgBrI,EAAO,UAAYX,EAAE,SAAW,UAAU,EAAE,OAC5DiJ,EAAetI,EAAO,UAAYX,EAAE,SAAW,SAAS,EAAE,OAGhE,IAAIiG,EAAQ,UACR1D,EAAQ,GAAY0D,EAAA,UACf1D,EAAQ,GAAY0D,EAAA,UACpB1D,EAAQ,KAAY0D,EAAA,WAE7B4C,EAAO,MAAM,YAAc5C,EAG3B4C,EAAO,UAAY;AAAA;AAAA;AAAA,+DAGwC5C,CAAK;AAAA,gCACpC1D,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAQPC,CAAU;AAAA;AAAA;AAAA,UAG9BwG,CAAa,cAAcC,CAAY;AAAA;AAAA;AAAA,UAGvCxB,EAAY,mBAAqB,yBAAyB;AAAA;AAAA,MAK5DqB,GACFD,EAAO,MAAM,UAAY,kBACzBA,EAAO,MAAM,QAAU,QAEvBA,EAAO,MAAM,UAAY,gBACzBA,EAAO,MAAM,QAAU,QAInB,MAAAK,EAAc,SAAS,eAAe,gBAAgB,EAC5D,GAAIA,EAAa,CAET,MAAAC,EAAiBD,EAAY,UAAU,EAAI,GACrC7K,EAAA6K,EAAA,mBAAA7K,EAAY,aAAa8K,EAAgBD,GAEtCC,EAAA,iBAAiB,QAAUT,GAAM,CAC9CA,EAAE,gBAAgB,EACTX,EAAA,EACV,EAIG,MAAAqB,EAAiB,SAAS,eAAe,mBAAmB,EAClE,GAAIA,EAAgB,CAEZ,MAAAC,EAAoBD,EAAe,UAAU,EAAI,GACxCrF,EAAAqF,EAAA,mBAAArF,EAAY,aAAasF,EAAmBD,GAEzCC,EAAA,iBAAiB,QAAUX,GAAM,CACjDA,EAAE,gBAAgB,EAClBI,EAAc,CAACA,EACXD,IACKA,EAAA,MAAM,UAAYC,EAAc,kBAAoB,gBACpDD,EAAA,MAAM,QAAUC,EAAc,MAAQ,OAC/C,CACD,EAIG,MAAAQ,EAAc,SAAS,eAAe,gBAAgB,EAC5D,GAAIA,EAAa,CAET,MAAAC,EAAiBD,EAAY,UAAU,EAAI,GACrCrE,EAAAqE,EAAA,mBAAArE,EAAY,aAAasE,EAAgBD,GAEtCC,EAAA,iBAAiB,QAAUb,GAAM,CAC9CA,EAAE,gBAAgB,EAClBF,EAAmB,EAAK,EACzB,EAWI,MAPS,IAAM,CACd,MAAAgB,EAAiB,SAAS,eAAe,uBAAuB,EAClEA,GACFA,EAAe,OAAO,CAE1B,CAEO,EACN,CAACrC,EAASoB,EAAiB1B,EAAQY,EAAWM,CAAQ,CAAC,EAG1D7K,YAAU,IACD,IAAM,CACL,MAAA2L,EAAS,SAAS,eAAe,uBAAuB,EAC1DA,GACFA,EAAO,OAAO,CAElB,EACC,EAAE,CACP,CAMgB,SAAAY,GAA6BtC,EAAmB,GAA2B,CACzFjK,YAAU,IAAM,CACd,GAAI,CAACiK,EAAS,OAEd,IAAIuC,EAAyB,CAAC,EAC1BC,EAAa,GAEX,MAAAC,EAAiBC,GAAyB,CAC1CA,EAAM,MAAQ,OACXF,IACUA,EAAA,GACbD,EAAc,CAAC,EACf,QAAQ,MAAM,yCAAyC,GAGzD,WAAW,IAAM,OACf,MAAMI,EAAgB,SAAS,cAC3B,GAAAA,GAAiBA,IAAkB,SAAS,KAAM,CACpDJ,EAAY,KAAKI,CAAa,EAGxB,MAAAC,EAAc,GAAGD,EAAc,QAAQ,aAAa,GAAGA,EAAc,GAAK,IAAMA,EAAc,GAAK,EAAE,GAAGA,EAAc,UAAY,IAAMA,EAAc,UAAU,MAAM,GAAG,EAAE,KAAK,GAAG,EAAI,EAAE,GAC/L,QAAQ,IAAI,GAAGJ,EAAY,MAAM,YAAYK,CAAW,EAAE,EAGpD,MAAA/G,EAAW8G,EAAc,aAAa,UAAU,EAChDlG,EAAYkG,EAAc,aAAa,YAAY,EACnDE,GAAiB3L,EAAAyL,EAAc,cAAd,YAAAzL,EAA2B,OAE9C2E,GAAY,SAASA,CAAQ,EAAI,GAC3B,aAAK,iCAAkC8G,CAAa,EAG1D,CAACE,GAAkB,CAACpG,GAAakG,EAAc,UAAY,UACrD,aAAK,qCAAsCA,CAAa,EAI5D,MAAAhM,EAAS,iBAAiBgM,EAAe,QAAQ,EACnDhM,EAAO,UAAY,QAAU,CAACA,EAAO,WAC/B,aAAK,mDAAoDgM,CAAa,CAChF,GAED,CAAC,GACKD,EAAM,MAAQ,UAAYF,IAEnC,QAAQ,IAAI,iDAAiDD,EAAY,MAAM,EAAE,EACjF,QAAQ,SAAS,EACJC,EAAA,GACbD,EAAc,CAAC,EAEnB,EAEMO,EAAiBJ,GAAsB,CACvCF,GAAcE,EAAM,kBAAkB,UAEpBA,EAAM,OAAO,QAAQ,qEAAqE,GAEpG,aAAK,oCAAqCA,EAAM,MAAM,EAGpE,EAES,iCAAiB,UAAWD,CAAa,EACzC,0BAAiB,UAAWK,CAAa,EAO3C,IAAM,CACF,6BAAoB,UAAWL,CAAa,EAC5C,6BAAoB,UAAWK,CAAa,EAEjDN,GACF,QAAQ,SAAS,CAErB,GACC,CAACxC,CAAO,CAAC,CACd,CAMgB,SAAA+C,GAAyB/C,EAAmB,GAA2B,CACrFjK,YAAU,IAAM,CACd,GAAI,CAACiK,EAAS,OAGR,MAAAgD,EAAc,SAAS,iBAAiB,aAAa,EACrDC,EAAgC,CAAC,EAE3BD,EAAA,QAAkBE,GAAA,CAC5B,MAAMC,EAAaD,EAAO,aAAa,WAAW,GAAK,SAEjDlC,EAAW,IAAI,iBAAkBC,GAAc,CACzCA,EAAA,QAAoBC,GAAA,OAC5B,GAAIA,EAAS,OAAS,aAAeA,EAAS,OAAS,gBAAiB,CACtE,MAAMkC,GAAQlM,EAAAgK,EAAS,OAAmB,cAA5B,YAAAhK,EAAyC,OACnDkM,GAEF,QAAQ,KAAK,qBADGD,IAAe,YAAc,eAAiB,WACrB,OAAOC,CAAI,GAAG,CACzD,CACF,CACD,EACF,EAEDpC,EAAS,QAAQkC,EAAQ,CACvB,UAAW,GACX,cAAe,GACf,QAAS,GACV,EAEDD,EAAU,KAAKjC,CAAQ,EACxB,EAGK,MAAAqC,EAAqBX,GAAsB,SAC3C,GAAAA,EAAM,kBAAkB,QAAS,CACnC,MAAMtM,EAAUsM,EAAM,OAChBjG,EAAYrG,EAAQ,aAAa,YAAY,EAC7C2G,EAAiB3G,EAAQ,aAAa,iBAAiB,EACvDgN,GAAOlM,EAAAd,EAAQ,cAAR,YAAAc,EAAqB,OAC5BwF,EAAOtG,EAAQ,aAAa,MAAM,GAAKA,EAAQ,QAAQ,YAAY,EAEzE,IAAIkN,EAAe,GAEnB,GAAI7G,EACa6G,EAAA7G,UACNM,EAAgB,CACnB,MAAAwG,EAAe,SAAS,eAAexG,CAAc,EAC5CuG,IAAA1G,EAAA2G,GAAA,YAAAA,EAAc,cAAd,YAAA3G,EAA2B,SAAU,QAC3CwG,EACME,EAAAF,EAEfE,EAAe,aAAa5G,CAAI,GAG9B4G,GACF,QAAQ,KAAK,6BAA6BA,CAAY,MAAM5G,CAAI,GAAG,CACrE,CAEJ,EAES,iCAAiB,UAAW2G,CAAiB,EAC7C,IAAM,CACbJ,EAAU,QAAQjC,GAAYA,EAAS,YAAY,EAC1C,6BAAoB,UAAWqC,CAAiB,CAC3D,GACC,CAACrD,CAAO,CAAC,CACd,CCtfO,MAAMwD,GAA6B,CACxC,eAAgB,CACd,MAAO,+CACP,SAAU,CACR,yCACA,8CACF,EACA,YAAa,yIACf,EACA,iBAAkB,CAChB,MAAO,8CACP,SAAU,CACR,kCACA,0CACF,EACA,YAAa,mIACf,EACA,gBAAiB,CACf,MAAO,0CACP,SAAU,CACR,iCACA,kCACF,EACA,YAAa,2HACf,EACA,iBAAkB,CAChB,MAAO,uCACP,SAAU,CACR,2CACA,wCACF,EACA,YAAa,wIACf,EACA,qBAAsB,CACpB,MAAO,sCACP,SAAU,CACR,4CACA,8CACF,EACA,YAAa,0HAEjB,EC5BA,SAASC,IAAM,CACP,MAAE,SAAA7L,CAAS,EAAImB,GAAc,EAGX,OAAAoI,GAAA,EAAmB,EACdmB,GAAA,EAAmB,EACvBS,GAAA,EAAmB,EAC5ChN,YAAU,IAAM,CAmBhB,EAAG,EAAE,EAIDS,EAAA,KAAAC,WAAA,WAACC,MAAA8B,GAAA,CAAmB,cAAe,GAAI,EAGvC9B,EAAA,IAAC,KACC,KAAK,gBACL,UAAU,YACV,MAAO,CACL,SAAU,WACV,IAAK,QACL,KAAM,MACN,WAAY,4BACZ,MAAO,QACP,QAAS,MACT,eAAgB,OAChB,aAAc,cACd,OAAQ,IACR,WAAY,eACd,EACA,QAAU,GAAM,EAAE,cAAc,MAAM,IAAM,IAC5C,OAAS,GAAM,EAAE,cAAc,MAAM,IAAM,QAC5C,gCAED,QAECf,EAAW,IAAE,gBAAO,OAAK,IAAG,eAAe,KAAK,OAAO,SAAU,GAChE,UAACe,MAAA,WAAQ,GAAG,OAAO,aAAW,OAC5B,SAACA,EAAA,IAAAiB,GAAA,CAAY,SAAAC,EAAoB,EACnC,QAGC,UAAQ,IAAG,QAAQ,aAAW,gCAC7B,SAAClB,MAAAoB,EAAA,UAAS,SAAUpB,MAAC6B,GAAyB,GAC5C,SAAA7B,MAAC2B,IAAW,SAAAT,EAAoB,WAAA4L,EAAA,CAAwB,CAC1D,GACF,QAEC,UAAQ,IAAG,eAAe,aAAW,4CACpC,SAAC9M,EAAA,IAAAoB,WAAA,CAAS,SAAUpB,MAAC6B,GAAyB,GAC5C,SAAC7B,MAAA4B,GAAoB,UAAAV,EAAoB,EAC3C,CACF,GACF,IACF,CAEJ,CCnFA,eAAe8L,IAAwB,CACjC,qBAAmB,UACjB,IACF,MAAMC,EAAe,MAAM,UAAU,cAAc,SAAS,SAAU,CACpE,MAAO,IACR,EAEO,YAAI,+CAAgDA,EAAa,KAAK,EAGjEA,EAAA,iBAAiB,cAAe,IAAM,CACjD,MAAMC,EAAYD,EAAa,WAC3BC,GACQA,EAAA,iBAAiB,cAAe,IAAM,CAC1CA,EAAU,QAAU,aAAe,UAAU,cAAc,YAE7D,QAAQ,IAAI,yDAAyD,CACvE,CACD,CACH,CACD,EAGGD,EAAa,QACf,WAAW,IAAM,QACfzM,EAAAyM,EAAa,SAAb,MAAAzM,EAAqB,YAAY,CAC/B,KAAM,eACN,QAAS,CACP,OAAQ,CACN,wBACA,+CACA,2CACA,mCACA,yBACF,CACF,IAED,GAAI,QAGFH,EAAO,CACN,aAAK,2CAA4CA,CAAK,EAKpE,CAEA8M,EAAS,WAAW,SAAS,eAAe,MAAM,CAAE,EAAE,aACnDC,EAAM,WAAN,CACC,eAACL,KAAI,CACP,EACF,EAGAC,GAAsB","names":["Navigation","activeSection","setActiveSection","useState","useEffect","handleScroll","sections","scrollPosition","section","element","offsetTop","offsetHeight","isActive","jsxs","Fragment","jsx","styles","ThreeDErrorBoundary","Component","props","error","_error","errorInfo","_a","RotatingPebble","children","speed","groupRef","useRef","useFrame","_","delta","HeroSection","isMobile","Canvas","Suspense","Float","ProceduralPebble","lazy","__vitePreload","n","module","TabSection","HoldMeditateSection","ComponentLoadingFallback","ParticleBackground","particleCount","containerRef","container","particles","i","particle","useScreenSize","setIsMobile","isTablet","setIsTablet","checkScreenSize","width","runAccessibilityAudit","rootElement","root","issues","runCheck","name","checkFn","results","checkColorContrast","checkKeyboardNavigation","checkAriaLabels","checkHeadingStructure","checkFocusManagement","checkImageAltText","checkFormLabels","checkMotionPreferences","checkSemanticStructure","checkSkipLinks","critical","serious","moderate","minor","failed","warnings","total","passed","baseScore","penaltyCritical","penaltySerious","penaltyModerate","penaltyMinor","score","compliance","fontSize","textColor","backgroundColor","getEffectiveBackgroundColor","contrast","calculateContrastRatio","requiredRatio","tabIndex","isNativelyFocusable","button","hasText","hasAriaLabel","hasAriaLabelledBy","hasTitle","containsOnlyIcon","impact","img","height","alt","ariaLabel","role","isInAccessibleContainer","_b","control","id","ariaLabelledBy","title","placeholder","hasLabel","isWrappedInLabel","headings","h1Count","h","previousLevel","heading","level","modal","src","field","ariaRequired","_c","sheet","rule","div","current","foundBackgroundColor","color1","color2","rgb1","parseColor","rgb2","l1","getRelativeLuminance","l2","lighter","darker","color","match","hex","char","r","g","b","namedColors","lowerColor","sRGB","c","logAccessibilityReport","report","issue","_index","icon","useAccessibilityAudit","options","enabled","autoRun","logToConsole","debounceMs","rootSelector","setReport","isRunning","setIsRunning","lastRun","setLastRun","debounceRef","lastDOMChangeRef","runAudit","auditReport","clearReport","debouncedAudit","observer","mutations","mutation","useAccessibilityMonitor","isWidgetVisible","setIsWidgetVisible","handleWidgetToggle","e","customEvent","prev","widget","isMinimized","displayReport","criticalCount","seriousCount","auditButton","newAuditButton","minimizeButton","newMinimizeButton","closeButton","newCloseButton","existingWidget","useKeyboardNavigationTracker","tabSequence","isTracking","handleKeyDown","event","activeElement","elementInfo","hasVisibleText","handleFocusIn","useScreenReaderSimulator","liveRegions","observers","region","politeness","text","handleFocusChange","announcement","labelElement","tabContent","App","registerServiceWorker","registration","newWorker","ReactDOM","React"],"ignoreList":[],"sources":["../../src/components/layout/Navigation.tsx","../../src/components/ui/ThreeDErrorBoundary.tsx","../../src/components/sections/HeroSection.tsx","../../src/components/LazyComponents.tsx","../../src/components/ui/ParticleBackground.tsx","../../src/hooks/useScreenSize.ts","../../src/utils/AccessibilityAuditor.ts","../../src/hooks/useAccessibilityAudit.ts","../../src/data/tabContent.ts","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport styles from './Navigation.module.css'\r\n\r\ninterface NavigationProps {}\r\n\r\nexport function Navigation({}: NavigationProps) {\r\n  const [activeSection, setActiveSection] = useState('home')\r\n  \r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const sections = ['home', 'about', 'how-it-works']\r\n      const scrollPosition = window.scrollY + 100 // Add offset for sticky nav\r\n\r\n      for (const section of sections) {\r\n        const element = document.getElementById(section)\r\n        if (element) {\r\n          const { offsetTop, offsetHeight } = element\r\n          if (scrollPosition >= offsetTop && scrollPosition < offsetTop + offsetHeight) {\r\n            setActiveSection(section)\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Set initial active section\r\n    if (window.scrollY < 100) {\r\n      setActiveSection('home')\r\n    }\r\n\r\n    window.addEventListener('scroll', handleScroll)\r\n    return () => window.removeEventListener('scroll', handleScroll)\r\n  }, [])\r\n\r\n  const isActive = (section: string) => activeSection === section\r\n\r\n  return (\r\n    <>\r\n      {/* Skip to main content for accessibility */}\r\n      <a href=\"#main-content\" className={styles.skipToMain}>\r\n        Skip to main content\r\n      </a>\r\n      \r\n      <nav className={styles.nav} role=\"navigation\" aria-label=\"Main navigation\">\r\n        <a href=\"#home\" className={styles.logo} aria-label=\"iembraceland home\">\r\n          iembraceland\r\n        </a>        <ul className={styles.links} role=\"list\">\r\n          <li>\r\n            <a \r\n              href=\"#home\" \r\n              className={`${styles.navLink} ${isActive('home') ? styles.active : ''}`}\r\n              aria-current={isActive('home') ? 'page' : undefined}\r\n            >\r\n              Home\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a \r\n              href=\"#about\" \r\n              className={`${styles.navLink} ${isActive('about') ? styles.active : ''}`}\r\n              aria-current={isActive('about') ? 'page' : undefined}\r\n            >\r\n              About\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a \r\n              href=\"#how-it-works\" \r\n              className={`${styles.navLink} ${isActive('how-it-works') ? styles.active : ''}`}\r\n              aria-current={isActive('how-it-works') ? 'page' : undefined}\r\n            >\r\n              How it works\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </>\r\n  )\r\n}\r\n","import { Component, ErrorInfo, ReactNode } from 'react'\r\n\r\ninterface Props {\r\n  children: ReactNode\r\n  fallback?: ReactNode\r\n  componentName?: string\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean\r\n  error?: Error\r\n}\r\n\r\n/**\r\n * Error Boundary for 3D Components\r\n * Gracefully handles Three.js and WebGL errors to prevent app crashes\r\n */\r\nclass ThreeDErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props)\r\n    this.state = { hasError: false }\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    // Update state so the next render will show the fallback UI\r\n    return { hasError: true, error }\r\n  }\r\n  componentDidCatch(_error: Error, errorInfo: ErrorInfo) {\r\n    // Log the error for monitoring    console.error(`3D Component Error in ${this.props.componentName || 'Unknown'}:`, _error)\r\n    console.error('Error Info:', errorInfo)\r\n    \r\n    // TODO: Report to error tracking service in production\r\n    // Example: Sentry, LogRocket, etc.\r\n    // errorTracker.captureException(error, { extra: errorInfo })\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // Custom fallback UI or default\r\n      return this.props.fallback || (\r\n        <div \r\n          style={{\r\n            padding: '20px',\r\n            textAlign: 'center',\r\n            color: '#666',\r\n            fontSize: '14px',\r\n            backgroundColor: '#f8f9fa',\r\n            border: '1px solid #e9ecef',\r\n            borderRadius: '8px',\r\n            margin: '10px'\r\n          }}\r\n        >\r\n          <p>‚ö†Ô∏è 3D visualization temporarily unavailable</p>\r\n          <details style={{ marginTop: '10px', fontSize: '12px' }}>\r\n            <summary>Technical Details</summary>\r\n            <p style={{ margin: '5px 0' }}>\r\n              Component: {this.props.componentName || 'Unknown'}\r\n            </p>\r\n            <p style={{ margin: '5px 0', fontFamily: 'monospace' }}>\r\n              {this.state.error?.message}\r\n            </p>\r\n          </details>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return this.props.children\r\n  }\r\n}\r\n\r\nexport default ThreeDErrorBoundary\r\n","import { Suspense, useRef } from 'react'\r\nimport { Canvas, useFrame } from '@react-three/fiber'\r\nimport { Float } from '@react-three/drei'\r\nimport { Group } from 'three'\r\nimport { ProceduralPebble } from '../three-d/ProceduralPebble'\r\nimport ThreeDErrorBoundary from '../ui/ThreeDErrorBoundary'\r\nimport styles from './HeroSection.module.css'\r\n\r\ninterface HeroSectionProps {\r\n  isMobile: boolean\r\n}\r\n\r\n// Create a rotating wrapper component\r\nfunction RotatingPebble({ children, speed = 1 }: { children: React.ReactNode, speed?: number }) {\r\n  const groupRef = useRef<Group>(null)\r\n    useFrame((_, delta) => {\r\n    if (groupRef.current) {\r\n      groupRef.current.rotation.y += delta * speed * 0.5 // Slow rotation\r\n      // groupRef.current.rotation.x += delta * speed * 0.05 // Very subtle wobble - removed for cleaner rotation\r\n    }\r\n  })\r\n  \r\n  return <group ref={groupRef}>{children}</group>\r\n}\r\n\r\nexport function HeroSection({ isMobile }: HeroSectionProps) {\r\n  return (\r\n    <div className={`${styles.heroWrapper} ambient-glow`}>      {/* 3D Canvas Layer - positioned to center pebble above CTA button */}\r\n      <Canvas \r\n        className={styles.heroCanvas} \r\n        camera={{ position: [0, 0, 3.5], fov: 45 }}\r\n      >        <ambientLight intensity={0.8} />\r\n        <directionalLight position={[4, 6, 5]} intensity={0.6} />\r\n        <directionalLight position={[-3, 4, 3]} color=\"#f0f4f8\" intensity={0.4} />\r\n        <directionalLight position={[0, -2, 2]} color=\"#e8f2ff\" intensity={0.2} />\r\n          <ThreeDErrorBoundary componentName=\"ProceduralPebble\">\r\n          {/* Main pebble with gentle float - centered horizontally, positioned above CTA */}\r\n          <Suspense fallback={null}>            <Float floatIntensity={1.0} rotationIntensity={0.4} speed={0.6}>              <RotatingPebble speed={0.6}>                <group \r\n                  scale={isMobile ? [0.496, 0.248, 0.496] : [0.868, 0.434, 0.868]} /* Increased by 24% */\r\n                  position={[0, 0.1, 0]} /* Moved up and centered */\r\n                >                  <ProceduralPebble \r\n                    distance={5} \r\n                    quality=\"high\" \r\n                    enableTextures={true}\r\n                  />\r\n                </group>\r\n              </RotatingPebble>\r\n            </Float>\r\n          </Suspense>\r\n        </ThreeDErrorBoundary>\r\n      </Canvas>      {/* ROOT text positioned above the pebble */}\r\n      <div className={styles.rootTextBackground}>\r\n        <h1 className={styles.rootText} aria-hidden=\"true\">ROOT</h1>\r\n      </div>      {/* Main Content with CTA button */}\r\n      <div className={styles.mainContent}>\r\n        <button \r\n          className={`${styles.ctaButton} btn-futuristic focus-ring`}\r\n          aria-label=\"Start your wellness journey\"\r\n        >\r\n          Buy Me :)\r\n        </button>\r\n      </div>      {/* Bottom-left positioned text where ROOT was */}\r\n      <p className={`${styles.subtitleBottomLeft} ${isMobile ? styles.mobile : ''}`}>\r\n        Companion for Emotional Embracing: ROOT\r\n      </p>\r\n\r\n      {/* Right side subtitle - updated text */}\r\n      <p className={`${styles.subtitleRightSide} ${isMobile ? styles.mobile : ''}`}>\r\n        The Stone Elf offers a quiet space to welcome, understand, and grow with every feeling.\r\n      </p>\r\n\r\n      {/* Scroll indicator */}\r\n      <svg className={styles.scrollCue} viewBox=\"0 0 24 36\" role=\"img\" aria-label=\"Scroll down\">\r\n        <path d=\"M12 4 v20\" />\r\n        <polyline points=\"6 18 12 24 18 18\" />\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n","import { lazy } from 'react'\r\n\r\n/**\r\n * Lazy-loaded components for better performance\r\n * These components are loaded on-demand to reduce initial bundle size\r\n */\r\n\r\n// 3D Components - Heavy dependencies\r\nexport const BokehBubbles = lazy(() => import('../BokehBubbles'))\r\nexport const ProceduralPebble = lazy(() => import('./three-d/ProceduralPebble').then(module => ({ default: module.ProceduralPebble })))\r\nexport const SceneManager = lazy(() => import('./three-d/SceneManager').then(module => ({ default: module.SceneManager })))\r\n\r\n// Section Components - Can be loaded after critical path\r\nexport const TabSection = lazy(() => import('./sections/TabSection').then(module => ({ default: module.TabSection })))\r\nexport const HoldMeditateSection = lazy(() => import('./sections/HoldMeditateSection').then(module => ({ default: module.HoldMeditateSection })))\r\n\r\n/**\r\n * Loading fallback component for Suspense boundaries\r\n */\r\nexport function ComponentLoadingFallback() {\r\n  return (\r\n    <div style={{\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      height: '100%',\r\n      minHeight: '200px',\r\n      color: '#003b5e',\r\n      fontFamily: '\"Source Sans Pro\", sans-serif',\r\n      fontSize: '0.9rem',\r\n      opacity: 0.7\r\n    }}>\r\n      <div style={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        gap: '12px'\r\n      }}>\r\n        <div style={{\r\n          width: '24px',\r\n          height: '24px',\r\n          border: '2px solid #e0e7ff',\r\n          borderTop: '2px solid #003b5e',\r\n          borderRadius: '50%',\r\n          animation: 'spin 1s linear infinite'\r\n        }} />\r\n        <span>Loading meditation experience...</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Minimal loading spinner for 3D components\r\n */\r\nexport function ThreeDLoadingFallback() {\r\n  return (\r\n    <div style={{\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      zIndex: 10,\r\n      color: '#003b5e',\r\n      fontFamily: '\"Source Sans Pro\", sans-serif',\r\n      fontSize: '0.8rem',\r\n      opacity: 0.6,\r\n      textAlign: 'center'\r\n    }}>\r\n      <div style={{\r\n        width: '20px',\r\n        height: '20px',\r\n        border: '2px solid rgba(0, 59, 94, 0.2)',\r\n        borderTop: '2px solid #003b5e',\r\n        borderRadius: '50%',\r\n        animation: 'spin 1s linear infinite',\r\n        margin: '0 auto 8px'\r\n      }} />\r\n      Initializing 3D...\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useRef } from 'react'\r\n\r\ninterface ParticleBackgroundProps {\r\n  particleCount?: number\r\n}\r\n\r\nexport function ParticleBackground({ particleCount = 50 }: ParticleBackgroundProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return\r\n\r\n    const container = containerRef.current\r\n    const particles: HTMLDivElement[] = []\r\n\r\n    // Create particles\r\n    for (let i = 0; i < particleCount; i++) {\r\n      const particle = document.createElement('div')\r\n      particle.className = 'particle'\r\n      particle.style.cssText = `\r\n        position: absolute;\r\n        width: ${Math.random() * 4 + 2}px;\r\n        height: ${Math.random() * 4 + 2}px;\r\n        background: radial-gradient(circle, rgba(211, 189, 242, ${Math.random() * 0.6 + 0.2}), transparent);\r\n        border-radius: 50%;\r\n        left: ${Math.random() * 100}%;\r\n        animation-delay: ${Math.random() * 15}s;\r\n        animation-duration: ${Math.random() * 10 + 10}s;\r\n        animation-name: float-particle;\r\n        animation-iteration-count: infinite;\r\n        animation-timing-function: linear;\r\n        pointer-events: none;\r\n      `\r\n      \r\n      container.appendChild(particle)\r\n      particles.push(particle)\r\n    }\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      particles.forEach(particle => {\r\n        if (particle.parentNode) {\r\n          particle.parentNode.removeChild(particle)\r\n        }\r\n      })\r\n    }\r\n  }, [particleCount])\r\n\r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      className=\"particle-bg\"\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        pointerEvents: 'none',\r\n        zIndex: -10,\r\n        overflow: 'hidden'\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { ScreenSizeHook } from '../types'\r\n\r\nexport const useScreenSize = (): ScreenSizeHook => {\r\n  const [isMobile, setIsMobile] = useState(false)\r\n  const [isTablet, setIsTablet] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      const width = window.innerWidth\r\n      setIsMobile(width <= 767)\r\n      setIsTablet(width > 767 && width <= 1024)\r\n    }\r\n    \r\n    checkScreenSize()\r\n    window.addEventListener('resize', checkScreenSize)\r\n    return () => window.removeEventListener('resize', checkScreenSize)\r\n  }, [])\r\n\r\n  return { isMobile, isTablet }\r\n}\r\n","// Accessibility Testing Utilities for Wellness Meditation App\r\n// Comprehensive validation of WCAG 2.1 AA compliance\r\n\r\nexport interface AccessibilityIssue {\r\n  element: Element\r\n  type: 'error' | 'warning' | 'info'\r\n  rule: string\r\n  description: string\r\n  impact: 'critical' | 'serious' | 'moderate' | 'minor'\r\n  recommendation: string\r\n}\r\n\r\nexport interface AccessibilityReport {\r\n  passed: number\r\n  failed: number\r\n  warnings: number\r\n  issues: AccessibilityIssue[]\r\n  score: number\r\n  compliance: 'AA' | 'A' | 'Non-compliant'\r\n}\r\n\r\n// Widget control - use this to programmatically show/hide the widget\r\nexport const AccessibilityWidgetControl = {\r\n  show: (): void => {\r\n    const existingWidget = document.getElementById('accessibility-monitor')\r\n    if (existingWidget) {\r\n      existingWidget.style.display = 'block'\r\n    } else {\r\n      // Create a custom event that the useAccessibilityMonitor hook can listen for\r\n      const event = new CustomEvent('a11y-widget-toggle', { detail: { visible: true } })\r\n      document.dispatchEvent(event)\r\n    }\r\n  },\r\n  \r\n  hide: (): void => {\r\n    const widget = document.getElementById('accessibility-monitor')\r\n    if (widget) {\r\n      widget.style.display = 'none'\r\n    }\r\n  },\r\n  \r\n  toggle: (): void => {\r\n    const widget = document.getElementById('accessibility-monitor')\r\n    if (widget) {\r\n      widget.style.display = widget.style.display === 'none' ? 'block' : 'none'\r\n    } else {\r\n      // Create a custom event that the useAccessibilityMonitor hook can listen for\r\n      const event = new CustomEvent('a11y-widget-toggle', { detail: { visible: true } })\r\n      document.dispatchEvent(event)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Main accessibility audit function\r\n * Runs comprehensive checks on the current page\r\n */\r\nexport async function runAccessibilityAudit(rootElement?: Element): Promise<AccessibilityReport> {\r\n  const root = rootElement || document.body\r\n  const issues: AccessibilityIssue[] = []\r\n  \r\n  try {\r\n    // Debug logging\r\n    console.debug('üéØ Starting accessibility audit...')\r\n    \r\n    // Core WCAG checks - wrap each in try/catch to prevent total failure\r\n    // Add debugging to track which checks are failing\r\n    const runCheck = (name: string, checkFn: () => AccessibilityIssue[]) => {\r\n      console.debug(`üéØ Running accessibility check: ${name}`)\r\n      try {\r\n        const results = checkFn()\r\n        console.debug(`‚úì ${name} check completed: ${results.length} issues found`)\r\n        return results\r\n      } catch (error) {\r\n        console.warn(`‚úï ${name} check failed:`, error)\r\n        return []\r\n      }\r\n    }\r\n    \r\n    issues.push(...runCheck('Color Contrast', () => checkColorContrast(root)))\r\n    issues.push(...runCheck('Keyboard Navigation', () => checkKeyboardNavigation(root)))\r\n    issues.push(...runCheck('ARIA Labels', () => checkAriaLabels(root)))\r\n    issues.push(...runCheck('Heading Structure', () => checkHeadingStructure(root)))\r\n    issues.push(...runCheck('Focus Management', () => checkFocusManagement(root)))\r\n    issues.push(...runCheck('Image Alt Text', () => checkImageAltText(root)))\r\n    issues.push(...runCheck('Form Labels', () => checkFormLabels(root)))\r\n    issues.push(...runCheck('Motion Preferences', () => checkMotionPreferences(root)))\r\n    issues.push(...runCheck('Semantic Structure', () => checkSemanticStructure(root)))\r\n    issues.push(...runCheck('Skip Links', () => checkSkipLinks(root)))\r\n  } catch (error) {\r\n    console.warn('Accessibility audit encountered errors:', error)\r\n  }\r\n    // Calculate metrics\r\n  const critical = issues.filter(i => i.impact === 'critical')\r\n  const serious = issues.filter(i => i.impact === 'serious')\r\n  const moderate = issues.filter(i => i.impact === 'moderate')\r\n  const minor = issues.filter(i => i.impact === 'minor')\r\n  \r\n  const failed = critical.length + serious.length\r\n  const warnings = moderate.length + minor.length\r\n  const total = failed + warnings\r\n  const passed = Math.max(0, 50 - total) // Assume 50 total checks\r\n  \r\n  // Calculate compliance score (0-100) - More balanced approach\r\n  // Each critical issue reduces the score by 10 points (instead of 20)\r\n  // Each serious issue reduces the score by 5 points (instead of 10)\r\n  // Give a base score of 70 even with some issues\r\n  const baseScore = 70\r\n  const penaltyCritical = Math.min(critical.length * 10, 50) // Cap at 50 points\r\n  const penaltySerious = Math.min(serious.length * 5, 20)   // Cap at 20 points\r\n  const penaltyModerate = Math.min(moderate.length * 2, 10) // Cap at 10 points\r\n  const penaltyMinor = Math.min(minor.length * 1, 5)       // Cap at 5 points\r\n  \r\n  const score = Math.max(0, baseScore - penaltyCritical - penaltySerious - penaltyModerate - penaltyMinor)\r\n  \r\n  // Determine compliance level\r\n  let compliance: 'AA' | 'A' | 'Non-compliant' = 'Non-compliant'\r\n  if (score >= 90 && critical.length === 0) {\r\n    compliance = 'AA'\r\n  } else if (score >= 70 && critical.length <= 2) {\r\n    compliance = 'A'\r\n  }\r\n  \r\n  return {\r\n    passed,\r\n    failed,\r\n    warnings,\r\n    issues,\r\n    score,\r\n    compliance\r\n  }\r\n}\r\n\r\n/**\r\n * Check color contrast ratios (WCAG 2.1 AA: 4.5:1 for normal text, 3:1 for large text)\r\n */\r\nfunction checkColorContrast(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  const textElements = root.querySelectorAll('p, span, a, button, h1, h2, h3, h4, h5, h6, li, td, th, label')\r\n  \r\n  textElements.forEach(element => {\r\n    try {\r\n      // Skip hidden or empty elements\r\n      const styles = getComputedStyle(element)\r\n      if (styles.display === 'none' || styles.visibility === 'hidden' || !element.textContent?.trim()) {\r\n        return\r\n      }\r\n      \r\n      // Skip elements with very small text (likely decorative)\r\n      const fontSize = parseFloat(styles.fontSize)\r\n      if (fontSize < 8) {\r\n        return\r\n      }\r\n      \r\n      const textColor = styles.color\r\n      const backgroundColor = getEffectiveBackgroundColor(element)\r\n      \r\n      if (textColor && backgroundColor) {\r\n        const contrast = calculateContrastRatio(textColor, backgroundColor)\r\n        const isLargeText = fontSize >= 18 || (fontSize >= 14 && (styles.fontWeight === 'bold' || parseInt(styles.fontWeight) >= 700))\r\n        \r\n        const requiredRatio = isLargeText ? 3.0 : 4.5\r\n        \r\n        // Only report if the contrast is significantly below requirements\r\n        // This helps reduce false positives\r\n        if (contrast < requiredRatio * 0.8) {\r\n          issues.push({\r\n            element,\r\n            type: 'error',\r\n            rule: 'WCAG 2.1 AA 1.4.3',\r\n            description: `Insufficient color contrast ratio: ${contrast.toFixed(2)}:1 (required: ${requiredRatio}:1)`,\r\n            impact: contrast < (requiredRatio * 0.6) ? 'critical' : 'serious',\r\n            recommendation: `Increase contrast between text (${textColor}) and background (${backgroundColor})`\r\n          })\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // Skip elements that can't be analyzed\r\n    }\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check keyboard navigation accessibility\r\n */\r\nfunction checkKeyboardNavigation(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  const interactiveElements = root.querySelectorAll('button, a, input, select, textarea, [tabindex], [onclick]')\r\n  \r\n  interactiveElements.forEach(element => {\r\n    const tabIndex = element.getAttribute('tabindex')\r\n    const isNativelyFocusable = ['button', 'a', 'input', 'select', 'textarea'].includes(element.tagName.toLowerCase())\r\n    \r\n    // Check for positive tabindex (anti-pattern)\r\n    if (tabIndex && parseInt(tabIndex) > 0) {\r\n      issues.push({\r\n        element,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 2.4.3',\r\n        description: 'Positive tabindex values create unpredictable tab order',\r\n        impact: 'moderate',\r\n        recommendation: 'Use tabindex=\"0\" or remove tabindex and rely on natural DOM order'\r\n      })\r\n    }\r\n    \r\n    // Check for unfocusable interactive elements\r\n    if (!isNativelyFocusable && tabIndex !== '0') {\r\n      if (element.hasAttribute('onclick') || element.getAttribute('role') === 'button') {\r\n        issues.push({\r\n          element,\r\n          type: 'error',\r\n          rule: 'WCAG 2.1 AA 2.1.1',\r\n          description: 'Interactive element is not keyboard accessible',\r\n          impact: 'serious',\r\n          recommendation: 'Add tabindex=\"0\" and keyboard event handlers'\r\n        })\r\n      }\r\n    }\r\n    \r\n    // Check for missing focus indicators\r\n    const styles = getComputedStyle(element, ':focus')\r\n    if (styles.outline === 'none' && !styles.boxShadow && !styles.border) {\r\n      issues.push({\r\n        element,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 2.4.7',\r\n        description: 'Missing visible focus indicator',\r\n        impact: 'moderate',\r\n        recommendation: 'Add :focus styles with visible outline or border'\r\n      })\r\n    }\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check ARIA labels and accessibility attributes\r\n */\r\nfunction checkAriaLabels(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  \r\n  // Check buttons without accessible names\r\n  const buttons = root.querySelectorAll('button')\r\n  buttons.forEach(button => {\r\n    // Skip hidden buttons\r\n    const styles = getComputedStyle(button)\r\n    if (styles.display === 'none' || styles.visibility === 'hidden') {\r\n      return\r\n    }\r\n    \r\n    // Check if button is part of a component that might handle accessibility differently\r\n    if (button.closest('[role=\"dialog\"], [role=\"menu\"], [role=\"toolbar\"], [role=\"tablist\"]')) {\r\n      return\r\n    }\r\n    \r\n    const hasText = button.textContent?.trim()\r\n    const hasAriaLabel = button.getAttribute('aria-label')\r\n    const hasAriaLabelledBy = button.getAttribute('aria-labelledby')\r\n    const hasTitle = button.getAttribute('title')\r\n    \r\n    // Check for icon-only buttons\r\n    const containsOnlyIcon = button.children.length === 1 && \r\n      (button.querySelector('svg, img, i.fa, i.icon, span.icon') !== null) && \r\n      !hasText\r\n      \r\n    if (!hasText && !hasAriaLabel && !hasAriaLabelledBy && !hasTitle) {\r\n      // Only mark as critical if it's a standalone button, not part of a component\r\n      const impact = containsOnlyIcon ? 'serious' : 'critical'\r\n      \r\n      issues.push({\r\n        element: button,\r\n        type: 'error',\r\n        rule: 'WCAG 2.1 AA 4.1.2',\r\n        description: 'Button has no accessible name',\r\n        impact,\r\n        recommendation: 'Add aria-label, visible text, or aria-labelledby attribute'\r\n      })\r\n    }\r\n  })\r\n  \r\n  // Check images without alt text - improved detection\r\n  const images = root.querySelectorAll('img')\r\n  images.forEach(img => {\r\n    // Skip hidden images\r\n    const styles = getComputedStyle(img)\r\n    if (styles.display === 'none' || styles.visibility === 'hidden') {\r\n      return\r\n    }\r\n    \r\n    // Skip very small images (likely decorative)\r\n    const width = img.width || parseInt(styles.width) || 0\r\n    const height = img.height || parseInt(styles.height) || 0\r\n    if (width < 24 || height < 24) {\r\n      return\r\n    }\r\n    \r\n    const alt = img.getAttribute('alt')\r\n    const ariaLabel = img.getAttribute('aria-label')\r\n    const role = img.getAttribute('role')\r\n    \r\n    // Check if image is inside a link or button that already has accessible text\r\n    const isInAccessibleContainer = Boolean(\r\n      img.closest('a, button')?.textContent?.trim() ||\r\n      img.closest('[aria-label]')\r\n    )\r\n    \r\n    if (alt === null && !ariaLabel && role !== 'presentation' && !isInAccessibleContainer) {\r\n      issues.push({\r\n        element: img,\r\n        type: 'error',\r\n        rule: 'WCAG 2.1 AA 1.1.1',\r\n        description: 'Image missing alt attribute',\r\n        impact: 'serious',\r\n        recommendation: 'Add descriptive alt text or role=\"presentation\" for decorative images'\r\n      })\r\n    }\r\n  })\r\n  \r\n  // Check form controls without labels - with improved detection\r\n  const formControls = root.querySelectorAll('input:not([type=\"hidden\"]), select, textarea')\r\n  formControls.forEach(control => {\r\n    // Skip hidden controls\r\n    const styles = getComputedStyle(control)\r\n    if (styles.display === 'none' || styles.visibility === 'hidden') {\r\n      return\r\n    }\r\n    \r\n    const id = control.getAttribute('id')\r\n    const ariaLabel = control.getAttribute('aria-label')\r\n    const ariaLabelledBy = control.getAttribute('aria-labelledby')\r\n    const title = control.getAttribute('title')\r\n    const placeholder = (control as HTMLInputElement).placeholder\r\n    \r\n    let hasLabel = false\r\n    if (id) {\r\n      const label = root.querySelector(`label[for=\"${id}\"]`)\r\n      hasLabel = !!label\r\n    }\r\n    \r\n    // Also check if control is wrapped in a label\r\n    const isWrappedInLabel = control.closest('label') !== null\r\n    \r\n    if (!hasLabel && !ariaLabel && !ariaLabelledBy && !title && !isWrappedInLabel) {\r\n      // Using placeholder alone is not sufficient for accessibility\r\n      const impact = placeholder ? 'moderate' : 'serious'\r\n      \r\n      issues.push({\r\n        element: control,\r\n        type: 'error',\r\n        rule: 'WCAG 2.1 AA 3.3.2',\r\n        description: placeholder ? 'Form control has placeholder but no label' : 'Form control has no associated label',\r\n        impact,\r\n        recommendation: 'Add a <label> element or aria-label attribute'\r\n      })\r\n    }\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check heading structure and hierarchy\r\n */\r\nfunction checkHeadingStructure(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  const headings = Array.from(root.querySelectorAll('h1, h2, h3, h4, h5, h6'))\r\n  \r\n  if (headings.length === 0) {\r\n    issues.push({\r\n      element: root,\r\n      type: 'warning',\r\n      rule: 'WCAG 2.1 AA 2.4.6',\r\n      description: 'No headings found on page',\r\n      impact: 'moderate',\r\n      recommendation: 'Add descriptive headings to structure content'\r\n    })\r\n    return issues\r\n  }\r\n  \r\n  // Check for h1\r\n  const h1Count = headings.filter(h => h.tagName === 'H1').length\r\n  if (h1Count === 0) {\r\n    issues.push({\r\n      element: root,\r\n      type: 'warning',\r\n      rule: 'WCAG 2.1 AA 2.4.6',\r\n      description: 'No H1 heading found',\r\n      impact: 'moderate',\r\n      recommendation: 'Add an H1 heading as the main page title'\r\n    })\r\n  } else if (h1Count > 1) {\r\n    issues.push({\r\n      element: root,\r\n      type: 'warning',\r\n      rule: 'WCAG 2.1 AA 2.4.6',\r\n      description: 'Multiple H1 headings found',\r\n      impact: 'minor',\r\n      recommendation: 'Use only one H1 per page for better structure'\r\n    })\r\n  }\r\n  \r\n  // Check heading hierarchy\r\n  let previousLevel = 0\r\n  headings.forEach(heading => {\r\n    const level = parseInt(heading.tagName.charAt(1))\r\n    \r\n    if (previousLevel > 0 && level > previousLevel + 1) {\r\n      issues.push({\r\n        element: heading,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 2.4.6',\r\n        description: `Heading level skipped (H${previousLevel} to H${level})`,\r\n        impact: 'minor',\r\n        recommendation: 'Use sequential heading levels for better structure'\r\n      })\r\n    }\r\n    \r\n    previousLevel = level\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check focus management and trapped focus\r\n */\r\nfunction checkFocusManagement(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  \r\n  // Check for modal dialogs without focus trapping\r\n  const modals = root.querySelectorAll('[role=\"dialog\"], [role=\"alertdialog\"], .modal')\r\n  modals.forEach(modal => {\r\n    const focusableElements = modal.querySelectorAll(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    )\r\n    \r\n    if (focusableElements.length === 0) {\r\n      issues.push({\r\n        element: modal,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 2.4.3',\r\n        description: 'Modal dialog has no focusable elements',\r\n        impact: 'moderate',\r\n        recommendation: 'Add focusable elements or implement focus management'\r\n      })\r\n    }\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check image alt text quality\r\n */\r\nfunction checkImageAltText(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  const images = root.querySelectorAll('img[alt]')\r\n  \r\n  images.forEach(img => {\r\n    const alt = img.getAttribute('alt')!\r\n    const src = img.getAttribute('src') || ''\r\n    \r\n    // Check for redundant alt text\r\n    if (alt.toLowerCase().includes('image') || alt.toLowerCase().includes('picture') || alt.toLowerCase().includes('photo')) {\r\n      issues.push({\r\n        element: img,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 1.1.1',\r\n        description: 'Alt text contains redundant words (image, picture, photo)',\r\n        impact: 'minor',\r\n        recommendation: 'Remove redundant words and focus on describing the content'\r\n      })\r\n    }\r\n    \r\n    // Check for filename as alt text\r\n    if (src.includes(alt) || alt.includes('.')) {\r\n      issues.push({\r\n        element: img,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 1.1.1',\r\n        description: 'Alt text appears to be a filename',\r\n        impact: 'moderate',\r\n        recommendation: 'Use descriptive alt text instead of filename'\r\n      })\r\n    }\r\n    \r\n    // Check for extremely long alt text\r\n    if (alt.length > 150) {\r\n      issues.push({\r\n        element: img,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 1.1.1',\r\n        description: 'Alt text is very long (>150 characters)',\r\n        impact: 'minor',\r\n        recommendation: 'Consider using shorter, more concise description'\r\n      })\r\n    }\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check form labels and error handling\r\n */\r\nfunction checkFormLabels(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  \r\n  // Check for required field indicators\r\n  const requiredFields = root.querySelectorAll('input[required], select[required], textarea[required]')\r\n  requiredFields.forEach(field => {\r\n    const ariaRequired = field.getAttribute('aria-required')\r\n    const hasRequiredIndicator = field.closest('label')?.textContent?.includes('*') ||\r\n                                 field.getAttribute('aria-label')?.includes('required') ||\r\n                                 ariaRequired === 'true'\r\n    \r\n    if (!hasRequiredIndicator) {\r\n      issues.push({\r\n        element: field,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 3.3.2',\r\n        description: 'Required field not clearly indicated',\r\n        impact: 'moderate',\r\n        recommendation: 'Add visual indicator (*) and aria-required=\"true\"'\r\n      })\r\n    }\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check motion preferences and animations\r\n */\r\nfunction checkMotionPreferences(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  \r\n  // Check for CSS animations without prefers-reduced-motion\r\n  const animatedElements = root.querySelectorAll('[style*=\"animation\"], [class*=\"animate\"], [class*=\"fade\"]')\r\n  \r\n  // This is a simplified check - in practice, you'd need to analyze CSS\r\n  if (animatedElements.length > 0) {\r\n    // Check if prefers-reduced-motion is respected in CSS\r\n    const hasReducedMotionSupport = Array.from(document.styleSheets).some(sheet => {\r\n      try {\r\n        return Array.from(sheet.cssRules).some(rule => \r\n          rule.cssText?.includes('prefers-reduced-motion')\r\n        )\r\n      } catch {\r\n        return false\r\n      }\r\n    })\r\n    \r\n    if (!hasReducedMotionSupport) {\r\n      issues.push({\r\n        element: root,\r\n        type: 'warning',\r\n        rule: 'WCAG 2.1 AA 2.3.3',\r\n        description: 'Animations found without prefers-reduced-motion support',\r\n        impact: 'moderate',\r\n        recommendation: 'Add @media (prefers-reduced-motion: reduce) CSS rules'\r\n      })\r\n    }\r\n  }\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check semantic HTML structure\r\n */\r\nfunction checkSemanticStructure(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  \r\n  // Check for proper landmark usage\r\n  const hasMain = root.querySelector('main, [role=\"main\"]')\r\n  \r\n  if (!hasMain) {\r\n    issues.push({\r\n      element: root,\r\n      type: 'warning',\r\n      rule: 'WCAG 2.1 AA 2.4.1',\r\n      description: 'No main landmark found',\r\n      impact: 'moderate',\r\n      recommendation: 'Add <main> element or role=\"main\" to main content area'\r\n    })\r\n  }\r\n  \r\n  // Check for divs that should be buttons\r\n  const clickableDivs = root.querySelectorAll('div[onclick], span[onclick]')\r\n  clickableDivs.forEach(div => {\r\n    if (!div.getAttribute('role') && !div.getAttribute('tabindex')) {\r\n      issues.push({\r\n        element: div,\r\n        type: 'error',\r\n        rule: 'WCAG 2.1 AA 4.1.2',\r\n        description: 'Clickable div/span without proper semantics',\r\n        impact: 'serious',\r\n        recommendation: 'Use <button> element or add role=\"button\" and tabindex=\"0\"'\r\n      })\r\n    }\r\n  })\r\n  \r\n  return issues\r\n}\r\n\r\n/**\r\n * Check skip links for keyboard navigation\r\n */\r\nfunction checkSkipLinks(root: Element): AccessibilityIssue[] {\r\n  const issues: AccessibilityIssue[] = []\r\n  \r\n  const skipLink = root.querySelector('a[href=\"#main\"], a[href*=\"skip\"]')\r\n  if (!skipLink) {\r\n    issues.push({\r\n      element: root,\r\n      type: 'warning',\r\n      rule: 'WCAG 2.1 AA 2.4.1',\r\n      description: 'No skip link found for keyboard navigation',\r\n      impact: 'moderate',\r\n      recommendation: 'Add a \"Skip to main content\" link at the beginning of the page'\r\n    })\r\n  }\r\n  \r\n  return issues\r\n}\r\n\r\n// Utility functions\r\n\r\nfunction getEffectiveBackgroundColor(element: Element): string | null {\r\n  try {\r\n    let current: Element | null = element\r\n    let foundBackgroundColor = false\r\n    let backgroundColor = 'rgba(0, 0, 0, 0)'\r\n    \r\n    // Try to find a background color walking up the DOM tree\r\n    while (current && current !== document.body && !foundBackgroundColor) {\r\n      const styles = getComputedStyle(current)\r\n      backgroundColor = styles.backgroundColor\r\n      \r\n      if (backgroundColor && backgroundColor !== 'rgba(0, 0, 0, 0)' && backgroundColor !== 'transparent') {\r\n        foundBackgroundColor = true\r\n        break\r\n      }\r\n      \r\n      current = current.parentElement\r\n    }\r\n    \r\n    // If we didn't find a background color, use the body's background or default to white\r\n    if (!foundBackgroundColor) {\r\n      backgroundColor = getComputedStyle(document.body).backgroundColor || 'rgb(255, 255, 255)'\r\n    }\r\n    \r\n    return backgroundColor\r\n  } catch (error) {\r\n    console.warn('Error getting effective background color:', error)\r\n    return 'rgb(255, 255, 255)' // Default to white as fallback\r\n  }\r\n}\r\n\r\nfunction calculateContrastRatio(color1: string, color2: string): number {\r\n  try {\r\n    const rgb1 = parseColor(color1)\r\n    const rgb2 = parseColor(color2)\r\n    \r\n    if (!rgb1 || !rgb2) return 4.5 // Return default passing value on parsing error\r\n    \r\n    const l1 = getRelativeLuminance(rgb1)\r\n    const l2 = getRelativeLuminance(rgb2)\r\n    \r\n    const lighter = Math.max(l1, l2)\r\n    const darker = Math.min(l1, l2)\r\n    \r\n    return (lighter + 0.05) / (darker + 0.05)\r\n  } catch (error) {\r\n    console.warn('Error calculating contrast ratio:', error)\r\n    return 4.5 // Return default passing value on error\r\n  }\r\n}\r\n\r\nfunction parseColor(color: string): [number, number, number] | null {\r\n  try {\r\n    // Handle rgba format\r\n    let match = color.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*[\\d.]+)?\\)/)\r\n    if (match) {\r\n      return [parseInt(match[1]), parseInt(match[2]), parseInt(match[3])]\r\n    }\r\n    \r\n    // Handle hex format\r\n    if (color.startsWith('#')) {\r\n      let hex = color.slice(1)\r\n      // Convert shorthand hex (#abc) to full form (#aabbcc)\r\n      if (hex.length === 3) {\r\n        hex = hex.split('').map(char => char + char).join('')\r\n      }\r\n      \r\n      if (hex.length === 6) {\r\n        const r = parseInt(hex.slice(0, 2), 16)\r\n        const g = parseInt(hex.slice(2, 4), 16)\r\n        const b = parseInt(hex.slice(4, 6), 16)\r\n        return [r, g, b]\r\n      }\r\n    }\r\n    \r\n    // Handle named colors\r\n    const namedColors: Record<string, [number, number, number]> = {\r\n      'white': [255, 255, 255],\r\n      'black': [0, 0, 0],\r\n      'red': [255, 0, 0],\r\n      'green': [0, 128, 0],\r\n      'blue': [0, 0, 255],\r\n      'yellow': [255, 255, 0],\r\n      // Add more as needed\r\n    }\r\n    \r\n    const lowerColor = color.toLowerCase()\r\n    if (lowerColor in namedColors) {\r\n      return namedColors[lowerColor]\r\n    }\r\n    \r\n    return [0, 0, 0] // Default to black\r\n  } catch (error) {\r\n    console.warn('Error parsing color:', color, error)\r\n    return null\r\n  }\r\n}\r\n\r\nfunction getRelativeLuminance([r, g, b]: [number, number, number]): number {\r\n  try {\r\n    // Normalize RGB values to the range [0, 1]\r\n    const sRGB = [r / 255, g / 255, b / 255].map(c => {\r\n      // Convert sRGB to linear RGB\r\n      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4)\r\n    })\r\n    \r\n    // Weighted sum (perceived brightness formula)\r\n    return 0.2126 * sRGB[0] + 0.7152 * sRGB[1] + 0.0722 * sRGB[2]\r\n  } catch (error) {\r\n    console.warn('Error calculating relative luminance:', error)\r\n    return 0.5 // Return mid-range value on error\r\n  }\r\n}\r\n\r\n/**\r\n * Generate accessibility report as HTML\r\n */\r\nexport function generateAccessibilityReport(report: AccessibilityReport): string {\r\n  const { passed, failed, issues, score, compliance } = report\r\n  \r\n  const severityColors = {\r\n    critical: '#dc3545',\r\n    serious: '#fd7e14',\r\n    moderate: '#ffc107',\r\n    minor: '#17a2b8'\r\n  }\r\n  \r\n  return `\r\n    <div style=\"font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px;\">\r\n      <h1 style=\"color: #333;\">Accessibility Audit Report</h1>\r\n      \r\n      <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;\">\r\n        <div style=\"background: #28a745; color: white; padding: 20px; border-radius: 8px; text-align: center;\">\r\n          <h3 style=\"margin: 0;\">Score</h3>\r\n          <p style=\"margin: 10px 0; font-size: 2em; font-weight: bold;\">${score}/100</p>\r\n        </div>\r\n        <div style=\"background: #17a2b8; color: white; padding: 20px; border-radius: 8px; text-align: center;\">\r\n          <h3 style=\"margin: 0;\">Compliance</h3>\r\n          <p style=\"margin: 10px 0; font-size: 1.5em; font-weight: bold;\">${compliance}</p>\r\n        </div>\r\n        <div style=\"background: #6c757d; color: white; padding: 20px; border-radius: 8px; text-align: center;\">\r\n          <h3 style=\"margin: 0;\">Passed</h3>\r\n          <p style=\"margin: 10px 0; font-size: 2em; font-weight: bold;\">${passed}</p>\r\n        </div>\r\n        <div style=\"background: #dc3545; color: white; padding: 20px; border-radius: 8px; text-align: center;\">\r\n          <h3 style=\"margin: 0;\">Failed</h3>\r\n          <p style=\"margin: 10px 0; font-size: 2em; font-weight: bold;\">${failed}</p>\r\n        </div>\r\n      </div>\r\n      \r\n      <h2 style=\"color: #333; margin-top: 40px;\">Issues Found (${issues.length})</h2>\r\n      \r\n      ${issues.map((issue, _index) => `\r\n        <div style=\"border: 1px solid #ddd; border-radius: 8px; margin: 10px 0; padding: 15px;\">\r\n          <div style=\"display: flex; align-items: center; margin-bottom: 10px;\">\r\n            <span style=\"background: ${severityColors[issue.impact]}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; text-transform: uppercase;\">\r\n              ${issue.impact}\r\n            </span>\r\n            <span style=\"margin-left: 10px; color: #666; font-size: 14px;\">${issue.rule}</span>\r\n          </div>\r\n          <h4 style=\"margin: 0 0 10px 0; color: #333;\">${issue.description}</h4>\r\n          <p style=\"margin: 0; color: #28a745;\"><strong>Recommendation:</strong> ${issue.recommendation}</p>\r\n          <details style=\"margin-top: 10px;\">\r\n            <summary style=\"cursor: pointer; color: #007bff;\">View Element</summary>\r\n            <pre style=\"background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 10px; overflow-x: auto; font-size: 12px;\">${issue.element.outerHTML.substring(0, 200)}${issue.element.outerHTML.length > 200 ? '...' : ''}</pre>\r\n          </details>\r\n        </div>\r\n      `).join('')}\r\n      \r\n      <div style=\"background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 40px;\">\r\n        <h3 style=\"color: #333; margin-top: 0;\">Next Steps</h3>\r\n        <ol style=\"color: #666;\">\r\n          <li>Address critical and serious issues first</li>\r\n          <li>Test with actual screen readers (NVDA, JAWS, VoiceOver)</li>\r\n          <li>Validate keyboard navigation manually</li>\r\n          <li>Run automated tools like axe-core for additional validation</li>\r\n          <li>Consider user testing with people who use assistive technologies</li>\r\n        </ol>\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n\r\n/**\r\n * Export report to console for development\r\n */\r\nexport function logAccessibilityReport(report: AccessibilityReport): void {\r\n  console.group('üéØ Accessibility Audit Report')\r\n  console.log(`Score: ${report.score}/100 | Compliance: ${report.compliance}`)\r\n  console.log(`Passed: ${report.passed} | Failed: ${report.failed} | Warnings: ${report.warnings}`)\r\n  \r\n  if (report.issues.length > 0) {\r\n    console.group('Issues Found:')\r\n    report.issues.forEach((issue, _index) => {\r\n      const icon = issue.impact === 'critical' ? 'üö®' : issue.impact === 'serious' ? '‚ö†Ô∏è' : issue.impact === 'moderate' ? 'üìù' : '‚ÑπÔ∏è'\r\n      console.groupCollapsed(`${icon} ${issue.impact.toUpperCase()}: ${issue.description}`)\r\n      console.log('Rule:', issue.rule)\r\n      console.log('Recommendation:', issue.recommendation)\r\n      console.log('Element:', issue.element)\r\n      console.groupEnd()\r\n    })\r\n    console.groupEnd()\r\n  }\r\n    console.groupEnd()\r\n}\r\n","// React Hook for Accessibility Testing Integration\r\n// Automatically runs accessibility audits in development mode\r\n\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { runAccessibilityAudit, logAccessibilityReport, AccessibilityReport } from '../utils/AccessibilityAuditor'\r\n\r\ninterface UseAccessibilityAuditOptions {\r\n  enabled?: boolean\r\n  autoRun?: boolean\r\n  logToConsole?: boolean\r\n  debounceMs?: number\r\n  rootSelector?: string\r\n}\r\n\r\ninterface AccessibilityAuditState {\r\n  report: AccessibilityReport | null\r\n  isRunning: boolean\r\n  lastRun: Date | null\r\n  runAudit: () => Promise<void>\r\n  clearReport: () => void\r\n}\r\n\r\n/**\r\n * Hook for accessibility testing in development\r\n * Provides automatic and manual accessibility auditing\r\n */\r\nexport function useAccessibilityAudit(options: UseAccessibilityAuditOptions = {}): AccessibilityAuditState {\r\n  const {\r\n    enabled = import.meta.env.DEV, // Only in development by default\r\n    autoRun = false,\r\n    logToConsole = true,\r\n    debounceMs = 1000,\r\n    rootSelector = 'main'\r\n  } = options\r\n  \r\n  const [report, setReport] = useState<AccessibilityReport | null>(null)\r\n  const [isRunning, setIsRunning] = useState(false)\r\n  const [lastRun, setLastRun] = useState<Date | null>(null)\r\n  \r\n  const debounceRef = useRef<number>()\r\n  const lastDOMChangeRef = useRef<Date>(new Date())\r\n  \r\n  // Manual audit trigger\r\n  const runAudit = async (): Promise<void> => {\r\n    if (!enabled || isRunning) return\r\n    \r\n    setIsRunning(true)\r\n    \r\n    try {\r\n      const rootElement = document.querySelector(rootSelector) as Element || document.body\r\n      const auditReport = await runAccessibilityAudit(rootElement)\r\n      \r\n      setReport(auditReport)\r\n      setLastRun(new Date())\r\n      \r\n      if (logToConsole) {\r\n        logAccessibilityReport(auditReport)\r\n      }\r\n      \r\n      // Also log summary for quick reference\r\n      if (import.meta.env.DEV) {\r\n        const { score, compliance, issues } = auditReport\r\n        const criticalIssues = issues.filter(i => i.impact === 'critical').length\r\n        const seriousIssues = issues.filter(i => i.impact === 'serious').length\r\n        \r\n        if (criticalIssues > 0 || seriousIssues > 0) {\r\n          console.warn(\r\n            `üéØ Accessibility: ${score}/100 (${compliance}) - ${criticalIssues} critical, ${seriousIssues} serious issues`\r\n          )\r\n        } else {\r\n          console.info(\r\n            `‚úÖ Accessibility: ${score}/100 (${compliance}) - No critical issues found`\r\n          )\r\n        }\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Accessibility audit failed:', error)\r\n    } finally {\r\n      setIsRunning(false)\r\n    }\r\n  }\r\n  \r\n  // Clear report\r\n  const clearReport = (): void => {\r\n    setReport(null)\r\n    setLastRun(null)\r\n  }\r\n  \r\n  // Debounced audit runner\r\n  const debouncedAudit = (): void => {\r\n    if (debounceRef.current) {\r\n      clearTimeout(debounceRef.current)\r\n    }\r\n    \r\n    debounceRef.current = setTimeout(() => {\r\n      runAudit()\r\n    }, debounceMs)\r\n  }\r\n  \r\n  // Auto-run on DOM changes (if enabled)\r\n  useEffect(() => {\r\n    if (!enabled || !autoRun) return\r\n    \r\n    const observer = new MutationObserver((mutations) => {\r\n      // Check if mutations are significant enough to warrant re-audit\r\n      const significantChange = mutations.some(mutation => \r\n        mutation.type === 'childList' && \r\n        (mutation.addedNodes.length > 0 || mutation.removedNodes.length > 0) ||\r\n        mutation.type === 'attributes' && \r\n        ['aria-label', 'aria-labelledby', 'aria-describedby', 'role', 'tabindex', 'alt'].includes(mutation.attributeName || '')\r\n      )\r\n      \r\n      if (significantChange) {\r\n        lastDOMChangeRef.current = new Date()\r\n        debouncedAudit()\r\n      }\r\n    })\r\n    \r\n    const rootElement = document.querySelector(rootSelector) || document.body\r\n    observer.observe(rootElement, {\r\n      childList: true,\r\n      subtree: true,\r\n      attributes: true,\r\n      attributeFilter: ['aria-label', 'aria-labelledby', 'aria-describedby', 'role', 'tabindex', 'alt', 'class']\r\n    })\r\n    \r\n    // Run initial audit\r\n    setTimeout(debouncedAudit, 500)\r\n    \r\n    return () => {\r\n      observer.disconnect()\r\n      if (debounceRef.current) {\r\n        clearTimeout(debounceRef.current)\r\n      }\r\n    }\r\n  }, [enabled, autoRun, rootSelector, debounceMs])\r\n  \r\n  // Cleanup\r\n  useEffect(() => {\r\n    return () => {\r\n      if (debounceRef.current) {\r\n        clearTimeout(debounceRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n  \r\n  return {\r\n    report,\r\n    isRunning,\r\n    lastRun,\r\n    runAudit,\r\n    clearReport\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for live accessibility monitoring (displays floating widget)\r\n * Shows real-time accessibility status during development\r\n */\r\nexport function useAccessibilityMonitor(enabled: boolean = import.meta.env.DEV): void {\r\n  // Only show widget in development by default\r\n  const isProduction = !import.meta.env.DEV\r\n  const [isWidgetVisible, setIsWidgetVisible] = useState(enabled && !isProduction)\r\n  \r\n  const { report, isRunning, runAudit } = useAccessibilityAudit({\r\n    enabled,\r\n    autoRun: true,\r\n    logToConsole: false,\r\n    debounceMs: 2000\r\n  })\r\n  \r\n  // Listen for programmatic toggle events\r\n  useEffect(() => {\r\n    const handleWidgetToggle = (e: Event) => {\r\n      const customEvent = e as CustomEvent\r\n      if (customEvent.detail && customEvent.detail.visible !== undefined) {\r\n        setIsWidgetVisible(customEvent.detail.visible)\r\n      } else {\r\n        setIsWidgetVisible(prev => !prev)\r\n      }\r\n    }\r\n    \r\n    document.addEventListener('a11y-widget-toggle', handleWidgetToggle)\r\n    \r\n    return () => {\r\n      document.removeEventListener('a11y-widget-toggle', handleWidgetToggle)\r\n    }\r\n  }, [])\r\n  \r\n  useEffect(() => {\r\n    if (!enabled) return\r\n    \r\n    // Create or update floating accessibility widget\r\n    let widget = document.getElementById('accessibility-monitor')\r\n    let isMinimized = false\r\n    \r\n    // If widget should not be visible, cleanup and return\r\n    if (!isWidgetVisible) {\r\n      if (widget) {\r\n        widget.remove()\r\n      }\r\n      return\r\n    }\r\n    \r\n    if (!widget) {\r\n      widget = document.createElement('div')\r\n      widget.id = 'accessibility-monitor'\r\n      widget.style.cssText = `\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 20px;\r\n        background: white;\r\n        border: 2px solid #ddd;\r\n        border-radius: 8px;\r\n        padding: 10px;\r\n        font-family: system-ui, sans-serif;\r\n        font-size: 12px;\r\n        box-shadow: 0 4px 12px rgba(0,0,0,0.1);\r\n        z-index: 10000;\r\n        max-width: 200px;\r\n        cursor: default;\r\n        transition: all 0.2s ease;\r\n        opacity: 0.85;\r\n      `\r\n      \r\n      document.body.appendChild(widget)\r\n    }\r\n    \r\n    // Provide default values if report isn't available yet\r\n    const displayReport = report || {\r\n      score: 100,\r\n      compliance: 'AA' as const,\r\n      issues: [],\r\n      passed: 0,\r\n      failed: 0,\r\n      warnings: 0\r\n    }\r\n    \r\n    const { score, compliance, issues } = displayReport\r\n    const criticalCount = issues.filter(i => i.impact === 'critical').length\r\n    const seriousCount = issues.filter(i => i.impact === 'serious').length\r\n    \r\n    // Color coding based on score\r\n    let color = '#28a745' // Green\r\n    if (score < 60) color = '#dc3545' // Red\r\n    else if (score < 80) color = '#ffc107' // Yellow\r\n    else if (score < 90) color = '#fd7e14' // Orange\r\n    \r\n    widget.style.borderColor = color\r\n    \r\n    // Create widget content with proper controls\r\n    widget.innerHTML = `\r\n      <div style=\"display: flex; align-items: center; justify-content: space-between; margin-bottom: 5px;\">\r\n        <div style=\"display: flex; align-items: center;\">\r\n          <div style=\"width: 12px; height: 12px; background: ${color}; border-radius: 50%; margin-right: 8px;\"></div>\r\n          <strong>A11y Score: ${score}/100</strong>\r\n        </div>\r\n        <div>\r\n          <button id=\"a11y-minimize-btn\" style=\"background: none; border: none; cursor: pointer; font-size: 14px; padding: 0 5px; margin-right: 2px;\" aria-label=\"Minimize accessibility widget\">_</button>\r\n          <button id=\"a11y-close-btn\" style=\"background: none; border: none; cursor: pointer; font-size: 14px; padding: 0 5px;\" aria-label=\"Close accessibility widget\">√ó</button>\r\n        </div>\r\n      </div>\r\n      <div style=\"color: #666; margin-bottom: 5px;\">\r\n        Compliance: <strong>${compliance}</strong>\r\n      </div>\r\n      <div style=\"color: #666; font-size: 11px;\">\r\n        ${criticalCount} critical, ${seriousCount} serious\r\n      </div>\r\n      <button id=\"a11y-audit-btn\" style=\"width: 100%; margin-top: 5px; padding: 4px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; font-size: 11px;\">\r\n        ${isRunning ? 'Running audit...' : 'Run Accessibility Audit'}\r\n      </button>\r\n    `\r\n    \r\n    // Update widget based on minimized state\r\n    if (isMinimized) {\r\n      widget.style.transform = 'translateX(80%)'\r\n      widget.style.opacity = '0.5'\r\n    } else {\r\n      widget.style.transform = 'translateX(0)'\r\n      widget.style.opacity = '0.85'\r\n    }\r\n    \r\n    // Handle audit button click\r\n    const auditButton = document.getElementById('a11y-audit-btn')\r\n    if (auditButton) {\r\n      // Remove any existing listeners to prevent duplicates\r\n      const newAuditButton = auditButton.cloneNode(true)\r\n      auditButton.parentNode?.replaceChild(newAuditButton, auditButton)\r\n      \r\n      newAuditButton.addEventListener('click', (e) => {\r\n        e.stopPropagation()\r\n        runAudit()\r\n      })\r\n    }\r\n    \r\n    // Handle minimize button click\r\n    const minimizeButton = document.getElementById('a11y-minimize-btn')\r\n    if (minimizeButton) {\r\n      // Remove any existing listeners to prevent duplicates\r\n      const newMinimizeButton = minimizeButton.cloneNode(true)\r\n      minimizeButton.parentNode?.replaceChild(newMinimizeButton, minimizeButton)\r\n      \r\n      newMinimizeButton.addEventListener('click', (e) => {\r\n        e.stopPropagation()\r\n        isMinimized = !isMinimized\r\n        if (widget) {\r\n          widget.style.transform = isMinimized ? 'translateX(80%)' : 'translateX(0)'\r\n          widget.style.opacity = isMinimized ? '0.5' : '0.85'\r\n        }\r\n      })\r\n    }\r\n    \r\n    // Handle close button click\r\n    const closeButton = document.getElementById('a11y-close-btn')\r\n    if (closeButton) {\r\n      // Remove any existing listeners to prevent duplicates\r\n      const newCloseButton = closeButton.cloneNode(true)\r\n      closeButton.parentNode?.replaceChild(newCloseButton, closeButton)\r\n      \r\n      newCloseButton.addEventListener('click', (e) => {\r\n        e.stopPropagation()\r\n        setIsWidgetVisible(false)\r\n      })\r\n    }\r\n    \r\n    // Cleanup function\r\n    const cleanup = () => {\r\n      const existingWidget = document.getElementById('accessibility-monitor')\r\n      if (existingWidget) {\r\n        existingWidget.remove()\r\n      }\r\n    }\r\n    \r\n    return cleanup\r\n  }, [enabled, isWidgetVisible, report, isRunning, runAudit])\r\n  \r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      const widget = document.getElementById('accessibility-monitor')\r\n      if (widget) {\r\n        widget.remove()\r\n      }\r\n    }\r\n  }, [])\r\n}\r\n\r\n/**\r\n * Hook for keyboard navigation testing\r\n * Tracks and logs keyboard navigation patterns\r\n */\r\nexport function useKeyboardNavigationTracker(enabled: boolean = import.meta.env.DEV): void {\r\n  useEffect(() => {\r\n    if (!enabled) return\r\n    \r\n    let tabSequence: Element[] = []\r\n    let isTracking = false\r\n    \r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === 'Tab') {\r\n        if (!isTracking) {\r\n          isTracking = true\r\n          tabSequence = []\r\n          console.group('üéπ Keyboard Navigation Tracking Started')\r\n        }\r\n        \r\n        setTimeout(() => {\r\n          const activeElement = document.activeElement\r\n          if (activeElement && activeElement !== document.body) {\r\n            tabSequence.push(activeElement)\r\n            \r\n            // Log focus changes\r\n            const elementInfo = `${activeElement.tagName.toLowerCase()}${activeElement.id ? '#' + activeElement.id : ''}${activeElement.className ? '.' + activeElement.className.split(' ').join('.') : ''}`\r\n            console.log(`${tabSequence.length}. Focus: ${elementInfo}`)\r\n            \r\n            // Check for accessibility issues\r\n            const tabIndex = activeElement.getAttribute('tabindex')\r\n            const ariaLabel = activeElement.getAttribute('aria-label')\r\n            const hasVisibleText = activeElement.textContent?.trim()\r\n            \r\n            if (tabIndex && parseInt(tabIndex) > 0) {\r\n              console.warn('‚ö†Ô∏è Positive tabindex detected:', activeElement)\r\n            }\r\n            \r\n            if (!hasVisibleText && !ariaLabel && activeElement.tagName === 'BUTTON') {\r\n              console.warn('‚ö†Ô∏è Button without accessible text:', activeElement)\r\n            }\r\n            \r\n            // Check focus visibility\r\n            const styles = getComputedStyle(activeElement, ':focus')\r\n            if (styles.outline === 'none' && !styles.boxShadow) {\r\n              console.warn('‚ö†Ô∏è Element may not have visible focus indicator:', activeElement)\r\n            }\r\n          }\r\n        }, 0)\r\n      } else if (event.key === 'Escape' && isTracking) {\r\n        // Stop tracking on Escape\r\n        console.log(`üéπ Navigation completed. Total focus changes: ${tabSequence.length}`)\r\n        console.groupEnd()\r\n        isTracking = false\r\n        tabSequence = []\r\n      }\r\n    }\r\n    \r\n    const handleFocusIn = (event: FocusEvent) => {\r\n      if (isTracking && event.target instanceof Element) {\r\n        // Additional focus tracking\r\n        const isFocusable = event.target.matches('button, a, input, select, textarea, [tabindex]:not([tabindex=\"-1\"])')\r\n        if (!isFocusable) {\r\n          console.warn('‚ö†Ô∏è Focus on non-standard element:', event.target)\r\n        }\r\n      }\r\n    }\r\n    \r\n    document.addEventListener('keydown', handleKeyDown)\r\n    document.addEventListener('focusin', handleFocusIn)\r\n    \r\n    // Log initial instructions\r\n    if (import.meta.env.DEV) {\r\n      console.info('üéπ Keyboard Navigation Tracker: Press Tab to start tracking, Escape to stop')\r\n    }\r\n    \r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown)\r\n      document.removeEventListener('focusin', handleFocusIn)\r\n      \r\n      if (isTracking) {\r\n        console.groupEnd()\r\n      }\r\n    }\r\n  }, [enabled])\r\n}\r\n\r\n/**\r\n * Hook for screen reader testing simulation\r\n * Simulates screen reader announcements in console\r\n */\r\nexport function useScreenReaderSimulator(enabled: boolean = import.meta.env.DEV): void {\r\n  useEffect(() => {\r\n    if (!enabled) return\r\n    \r\n    // Track ARIA live regions\r\n    const liveRegions = document.querySelectorAll('[aria-live]')\r\n    const observers: MutationObserver[] = []\r\n    \r\n    liveRegions.forEach(region => {\r\n      const politeness = region.getAttribute('aria-live') || 'polite'\r\n      \r\n      const observer = new MutationObserver((mutations) => {\r\n        mutations.forEach(mutation => {\r\n          if (mutation.type === 'childList' || mutation.type === 'characterData') {\r\n            const text = (mutation.target as Element).textContent?.trim()\r\n            if (text) {\r\n              const urgency = politeness === 'assertive' ? 'üîä ASSERTIVE' : 'üîá POLITE'\r\n              console.info(`üì¢ Screen Reader (${urgency}): \"${text}\"`)\r\n            }\r\n          }\r\n        })\r\n      })\r\n      \r\n      observer.observe(region, {\r\n        childList: true,\r\n        characterData: true,\r\n        subtree: true\r\n      })\r\n      \r\n      observers.push(observer)\r\n    })\r\n    \r\n    // Track focus changes for screen reader context\r\n    const handleFocusChange = (event: FocusEvent) => {\r\n      if (event.target instanceof Element) {\r\n        const element = event.target\r\n        const ariaLabel = element.getAttribute('aria-label')\r\n        const ariaLabelledBy = element.getAttribute('aria-labelledby')\r\n        const text = element.textContent?.trim()\r\n        const role = element.getAttribute('role') || element.tagName.toLowerCase()\r\n        \r\n        let announcement = ''\r\n        \r\n        if (ariaLabel) {\r\n          announcement = ariaLabel\r\n        } else if (ariaLabelledBy) {\r\n          const labelElement = document.getElementById(ariaLabelledBy)\r\n          announcement = labelElement?.textContent?.trim() || ''\r\n        } else if (text) {\r\n          announcement = text\r\n        } else {\r\n          announcement = `unlabeled ${role}`\r\n        }\r\n        \r\n        if (announcement) {\r\n          console.info(`üëÅÔ∏è Screen Reader Focus: \"${announcement}\" (${role})`)\r\n        }\r\n      }\r\n    }\r\n    \r\n    document.addEventListener('focusin', handleFocusChange)\r\n      return () => {\r\n      observers.forEach(observer => observer.disconnect())\r\n      document.removeEventListener('focusin', handleFocusChange)\r\n    }\r\n  }, [enabled])\r\n}\r\n\r\nexport default {\r\n  useAccessibilityAudit,\r\n  useAccessibilityMonitor,\r\n  useKeyboardNavigationTracker,\r\n  useScreenReaderSimulator\r\n}\r\n","import { TabContentData } from '../types'\r\n\r\nexport const tabContent: TabContentData = {\r\n  'anchor-focus': {\r\n    title: 'Strengthen focus through pulse-guided breath',\r\n    features: [\r\n      'Stay present in moments that overwhelm',\r\n      'Reduce spiraling thoughts with steady rhythm'\r\n    ],\r\n    description: 'Let rhythmic sensations and guided breath redirect racing thoughts‚Äîhelping your mind slow down and return to calm, one pulse at a time.'\r\n  },\r\n  'release-stress': {\r\n    title: 'Release tension with synchronized breathing',\r\n    features: [\r\n      'Lower stress hormones naturally',\r\n      'Activate your body\\'s relaxation response'\r\n    ],\r\n    description: 'Feel physical tension melt away as guided vibrations help your nervous system shift from fight-or-flight to rest-and-digest mode.'\r\n  },\r\n  'enhance-sleep': {\r\n    title: 'Prepare your mind for restorative sleep',\r\n    features: [\r\n      'Create calming bedtime rituals',\r\n      'Quiet racing thoughts before bed'\r\n    ],\r\n    description: 'Gentle pulses and soothing sounds guide your mind into a peaceful state, making it easier to fall asleep and stay asleep.'\r\n  },\r\n  'sync-mind-body': {\r\n    title: 'Harmonize mental and physical states',\r\n    features: [\r\n      'Align breath with heart rate variability',\r\n      'Create coherence between mind and body'\r\n    ],\r\n    description: 'Experience the profound connection between mental clarity and physical wellness through synchronized breathing and biometric feedback.'\r\n  },\r\n  'practice-stillness': {\r\n    title: 'Cultivate deep mindfulness practice',\r\n    features: [\r\n      'Develop sustained attention and awareness',\r\n      'Build resilience through consistent practice'\r\n    ],\r\n    description: 'Progress from scattered attention to focused presence, creating a foundation for lasting peace and emotional stability.'\r\n  }\r\n}\r\n","// src/App.tsx\r\nimport { Suspense, useEffect } from 'react'\r\nimport { Navigation } from './components/layout/Navigation'\r\nimport { HeroSection } from './components/sections/HeroSection'\r\nimport { TabSection, HoldMeditateSection, ComponentLoadingFallback } from './components/LazyComponents'\r\nimport { ParticleBackground } from './components/ui/ParticleBackground'\r\nimport { useScreenSize } from './hooks/useScreenSize'\r\nimport { \r\n  useAccessibilityMonitor, \r\n  useKeyboardNavigationTracker, \r\n  useScreenReaderSimulator \r\n} from './hooks/useAccessibilityAudit'\r\nimport { tabContent } from './data/tabContent'\r\nimport './App.css'\r\n\r\nfunction App() {\r\n  const { isMobile } = useScreenSize()\r\n  \r\n  // Accessibility testing hooks (development only)\r\n  useAccessibilityMonitor(import.meta.env.DEV)\r\n  useKeyboardNavigationTracker(import.meta.env.DEV)\r\n  useScreenReaderSimulator(import.meta.env.DEV)  // Initialize comprehensive testing suite in development\r\n  useEffect(() => {\r\n    if (import.meta.env.DEV) {\r\n      console.log('üß™ Wellness App Testing Suite initialized')\r\n      console.log('Use window.runTests() to manually run the full test suite')\r\n      \r\n      // Initialize testing suite globally for manual testing\r\n      import('./utils/TestSuite').then(({ testSuite }) => {\r\n        (window as any).runTests = () => testSuite.runFullSuite()\r\n      })\r\n        // Add A11y testing helpers - commented out until files are created\r\n      // import('./utils/a11y-test').catch(err => {\r\n      //   console.warn('Failed to load A11y test script:', err)\r\n      // })\r\n      \r\n      // Add comprehensive A11y test suite - commented out until files are created\r\n      // import('./utils/a11y-test-suite').catch(err => {\r\n      //   console.warn('Failed to load A11y test suite:', err)\r\n      // })\r\n    }\r\n  }, [])\r\n  return (\r\n    <>\r\n      {/* Ambient particle background */}\r\n      <ParticleBackground particleCount={30} />\r\n      \r\n      {/* Skip link for keyboard navigation */}\r\n      <a \r\n        href=\"#main-content\" \r\n        className=\"skip-link\"\r\n        style={{\r\n          position: 'absolute',\r\n          top: '-40px',\r\n          left: '6px',\r\n          background: 'var(--colors-primary-800)',\r\n          color: 'white',\r\n          padding: '8px',\r\n          textDecoration: 'none',\r\n          borderRadius: '0 0 4px 4px',\r\n          zIndex: 1000,\r\n          transition: 'top 0.2s ease'\r\n        }}\r\n        onFocus={(e) => e.currentTarget.style.top = '0'}\r\n        onBlur={(e) => e.currentTarget.style.top = '-40px'}\r\n      >\r\n        Skip to main content\r\n      </a>\r\n      \r\n      <Navigation />      <main id=\"main-content\" role=\"main\" tabIndex={-1}>\r\n        <section id=\"home\" aria-label=\"Home\">\r\n          <HeroSection isMobile={isMobile} />\r\n        </section>\r\n        \r\n        {/* Lazy load non-critical sections */}\r\n        <section id=\"about\" aria-label=\"About - Meditation techniques\">\r\n          <Suspense fallback={<ComponentLoadingFallback />}>\r\n            <TabSection isMobile={isMobile} tabContent={tabContent} />\r\n          </Suspense>\r\n        </section>\r\n        \r\n        <section id=\"how-it-works\" aria-label=\"How it works - Hold and meditate practice\">\r\n          <Suspense fallback={<ComponentLoadingFallback />}>\r\n            <HoldMeditateSection isMobile={isMobile} />\r\n          </Suspense>\r\n        </section>\r\n      </main>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport App from './App.tsx'\r\nimport './index.css'\r\n\r\n// Service Worker Registration for Performance Optimization\r\nasync function registerServiceWorker() {\r\n  if ('serviceWorker' in navigator && import.meta.env.PROD) {\r\n    try {\r\n      const registration = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      })\r\n      \r\n      console.log('[SW] Service Worker registered successfully:', registration.scope)\r\n      \r\n      // Handle updates\r\n      registration.addEventListener('updatefound', () => {\r\n        const newWorker = registration.installing\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              // New service worker available, prompt user to refresh\r\n              console.log('[SW] New service worker available - consider refreshing')\r\n            }\r\n          })\r\n        }\r\n      })\r\n      \r\n      // Pre-cache critical 3D assets after app loads\r\n      if (registration.active) {\r\n        setTimeout(() => {\r\n          registration.active?.postMessage({\r\n            type: 'CACHE_ASSETS',\r\n            payload: {\r\n              assets: [\r\n                '/src/BokehBubbles.tsx',\r\n                '/src/components/three-d/ProceduralPebble.tsx',\r\n                '/src/components/three-d/SceneManager.tsx',\r\n                '/src/utils/AnimationScheduler.ts',\r\n                '/src/utils/LRUCache.ts'\r\n              ]\r\n            }\r\n          })\r\n        }, 2000) // Cache after initial load\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.warn('[SW] Service Worker registration failed:', error)\r\n    }\r\n  } else if (!import.meta.env.PROD) {\r\n    console.log('[SW] Service Worker skipped in development mode')\r\n  }\r\n}\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n)\r\n\r\n// Register service worker after React app mounts\r\nregisterServiceWorker()\r\n"],"file":"assets/index-C0Swk4o5.js"}